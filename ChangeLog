* tagged as ARANYM_0_8_5_BETA

2004/01/07 - joy
- gui-sdl/dlgMain.cpp: show "unsupported yet" everywhere for the curious.

- NEWS, README etc: update for release


2004/01/06 - Xavier
- gui-sdl/sdlgui.cpp: improved maintainability and "look'n'feel".
  - Factorized objects coordinate computation.
  - Factorized objects refreshing code.
  - Factorized objects drawing code.
  - Radio button handling simplified.
  - Dialog centered "on the fly" (root object coordinates not modified anymore).
  - Dialog centered at the pixel level instead of char level.
  - Boxes/Buttons borders more GEM-like.
  - Buttons labels centered at the pixel level instead of char level.
  - When user click on a button and move the mouse before he release mouse
    button, the state of the button is dynamicaly updated.
  - SDLGui_FindObj() takes buttons and boxes border into account.
  Since ARAnyM GUI does not use radio buttons or popup buttons, these objects
  have not been tested. Will do it ASAP. Please report any problem with them.

- hostscreen.cpp: modified GUI size to keep root box borders on screen.


2004/01/05 - joy
- main_unix.cpp, parameters.cpp: 'program_name' is back (cygwin needs it)

- input.cpp: try to iconify fullscreen window when user wants to release
  mouse and keyboard (Hi Guido :-)

- main.cpp: NatFeats initialized at startup, de-initialized at exit and
  re-initialized at Restart. The re-init code (exit + init) is not optimal.
  Maybe we should come up with a reinit() function and let NF authors to
  define what should happen at creation time only and what should be
  refreshed upon each reboot.

- natfeat/nf_base.*: bool init() and void exit() virtual functions defined.

- natfeat/nf_objs.*: initNatFeats() calls all NF's init(). Similarly for
  exitNatFeats().

- natfeat/xhdi.cpp: the init() function is used for remembering the disk
  settings so that on-the-fly changes in SETUP don't ruin the pending
  disk operations. This was the main reason for introducing NF init/exit
  although after reviewing the code it was obvious that such functions
  were needed for a long time and will be useful for other complex modules
  (hostfs?) in future.


2003/01/04 - STanda
- fvdidrv:
   * NF API interface polished (made with a use of the enum {} like
     e.g. hostfs). The old non-NF interface dispatch routine removed.
   * Color handling rewritten to be able to support virtual workstation
     local palette. The NF API functions now take HW color values instead
     of the color index (XaAES RSC palette feature works properly now).
   * The interface version bumped to 1.100 (nfapi version constant
     0x10000960 -> 0x11000960) due to the color handling changes.


2004/01/03 - joy
- videl.cpp, parameters.*, main.cpp, configure.ac, documentation.txt:
  DIRECT_TRUECOLOR hack removed. I don't think it was ever used.

- main_unix.cpp: code rearranged for slightly better readability.

- gui-sdl/sdlgui.*: SG_HIDDEN state introduced. Helps for context-sensitive
  display.

- gui-sdl/dlgDisk.cpp: no more confused users as all CD-ROM unrelated
  settings are hidden now when CD-ROM is selected.
  An automagic detection of C/H/S geometry for loaded disk images added.

- parameters.*, main.cpp: tos and emutos paths moved to bx_options struct.
  The goal is to keep everything in the struct for easier handling in the
  SETUP GUI.

- main_unix.cpp: 'program_name' is gone.


2004/01/02 - joy
- gui-sdl/dlgDisk.cpp: Disk geometry added (C/H/S).
  Also, there is Insert/Eject button in each IDE set so it now supports
  mounting of two IDE CD-ROMs simultaneously :)

- gui-sdl/sdlgui.cpp,h: CHECKBOX can be placed on right side of the text.
  Same thing could/should be done for RADIO button.

- gui-sdl/font8.h: font8.bmp included in the code itself to get rid of
  problems with loading it at runtime

- gui-sdl/sdlgui.cpp: Load_XBM() for initializing the font (kindly provided
  by Martin Doering, thanks).

- parameters.cpp,h: recently added guifont_path removed :) It will come back,
  though, once the TOS font file format loading is implemented (see TODO).

- Makefile.in: font8.bmp is not installed

- configure.ac, Makefile.in: GUISDLSRCS introduced (contains gui-sdl/ files)

- TODO: one thing done (font8), another ideas arrived (floppy bootup insert)


2004/01/01 PM - joy
- fdc.cpp: added is_floppy_inserted() (used in the config GUI). Also
  changeFloppy() called on insert_floppy() - this fixes the old reported
  problem with installing NVDI from several diskettes.

- hardware.cpp,h: getIDE() added (used in RestartAll for IDE reinit).

- ide.cpp,h: init() added - contains the conversion of some bx_options
  that was previously in parameters:postload_ide(). In init() it's better
  as we need to convert the options also after config GUI changes (where
  we don't want to call postload_* stuff).

- main.cpp: call IDE::init() in RestartAll() to reinitialize
  the IDE settings (possibly changed in the config GUI).

- parameters.cpp,h: 'floppy.inserted' removed. Instead, we'd need something
  like 'floppy.present' to indicate whether to mount the floppy on boot
  or not.
  Also the bx_options.atadevice parameters conversion moved to ide::init().

- parameters.cpp: loadSettings() now properly pre-/postinitialized by
  calling preset_cfg() and postload_cfg().

- gui-sdl/dlgDisk.cpp: rewritten, finished, tested, working.

- gui-sdl/dlgMain.cpp: load of settings from a config file now properly
  update GUI settings. Also the "Apply" button is enlarged to emphasize
  that without applying of the changes the Save Settings or Reboot/Close
  actions ignore the changes made in config dialogs.

- TODO: large update/rewrite. Get involved if you have some spare time.


2004/01/01 AM - joy
- gui-sdl/dlgMain: adding more options

- input.cpp, main.cpp,h: RestartAll() now reinitializes the OS (in future
  it has to reinitialize also the memory and all hardware). Visible result
  of this change is the possibility of loading another config file from GUI
  in run-time and reboot with different OS (from TOS to AFROS, for example).

 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~~ Happy New Year to all ARAnyM fans ~~
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

2003/12/31 - joy
- main.cpp: startup GUI now uses the same thread schema as the normal GUI.
  Windows SDL couldn't read mouse events in timer thread :-(

- input.cpp: small clean up in the GUI handling


2003/12/28 PM - joy
- hostscreen.cpp: removed the scary IPC hack and switched to user SDL events

- input.cpp: same IPC hack fix, SDL keyboard and mouse events mapped to
  the user event. The event processing (in check_event()) changed from
  PollEvent to threadsafe PeepEvents().

- gui-sdl/sdlgui.cpp: IPC fix: keyboard and mouse events decoded from user
  events.

- gui-sdl/dlgMain.cpp: missing initialization of reboot/shutdown flags.
  Loading/saving of config file with editable filename implemented.

- parameters.cpp,h: loading and saving of config file from GUI works now.

- main.cpp: fixed scary bug - how could this work this morning? Use the 
  GUI timer thread _before_ the actual 200 Hz timer thread is started...


2003/12/28 AM - joy
- sdl-gui.cpp, dlgMain.cpp: font init moved back to the main dialog,
  freeing of font surface added.

- hostscreen.cpp: color palette initialized to 16 default TOS colors

- main.cpp: startup GUI with separate timer thread for handling input
  events before the standard 200 Hz timer starts

- parameters.cpp,h: "-G" command line parameter opens the startup GUI.


2003/12/27 - joy
- SDL GUI cleanup: first, all SDL GUI related files are in gui-sdl/ folder
  now. Then, each dialog is in its own file. At last, SDL GUI now supports
  EDIT field (have yet to add passing the keyboard info) and the FileSelect
  now supports editing the filename ("save as..."). We are basically in sync
  with hatari 0.45 now.

- sdl-gui.cpp: dialogs are now centered automagically by DrawDialog().
  May seem unnecessary at first but helps when the screen resolution is
  changed and dialogs need to be redrawn at different positions.

- input.cpp: cleaned up the way the GUI is open 

- main.cpp: prepare for the initial GUI popup

- ndebug.cpp: "char" -> "int" to get rid of a compiler warning

- sdl-gui.cpp: font init moved from dlgMain to SDLGui_Init().

- include/version.h: we are at 0.8.5alpha now


2003/12/26 - joy
- input.cpp: cleaned up.


2003/12/25 - joy
- hostscreen.cpp: terrific hack that lets the SDL GUI thread know about
  resolution change.


* tagged as ARANYM_0_8_4_ALPHA

2003/12/24 - joy
- hostscreen.cpp: blendBackgrounds() added. This function updates the 
  background of active GUI with the running ARAnyM screen contents.
  I played with SDL_SRCALPHA etc. to make the background a bit greyed out
  or something but haven't succeeded.

- main.cpp: blendBackgrounds() called with 5 Hz refresh. Also the VIDEL
  renderScreen is now called even if GUI is active (naturally, otherwise
  the blendBackground couldn't work).


2003/12/19 - patrice

- bad implementation of bcopy() macro for mingw in sysdeps.h.

- changed DATADIR to ARANYM_DATADIR to make mingw and cygwin happy (not
  conflicting with their system headers).
  

2003/12/17 - joy
- parameters.cpp: "GUIfont" config option added (as promised). Most of
  the complicated logic for guessing the right path for non-Unix systems
  can be removed soon.

- sdlgui.cpp: removed the cygwin_to_win32 conversion of the GUI font path.
  Two reasons for that: first, user can specify the path in MS-DOS format
  in the config file now (if ever needed). Second, the mingw32 compiled
  SDL does not work properly anyway so we use cygwin compiled SDL now
  (and that one surely reads unix-like paths).


2003/12/16 - joy
- mfp.cpp: initializing the internal variables suddenly fixed all the 
  weird problems I had with booting the aranym since I converted the HW
  classes to dynamically created objects. So it's finally solved. 


2003/12/16 - Xavier
- doc/build-cygwin.sh: added a small shell script to ease compilation on
  Cygwin systems. This script is needed since SDL does not allow to build
  Cygwin applications out of the box. Please read comments at the top of
  build-cygwin.sh for detailed informations.

- doc/compiling_for_windows.txt: removed old documentation superseded by
  build-cygwin.sh.


2003/12/15 - joy
- why to bother with demoing weird problems in extfs.cpp when the file
  is obsolete and can be removed? Good idea from Standa. ExtFS removed.
  HostFS is the only right choice now.

- emul_op.cpp: bunch of obsolete emul_op instructions was removed.

- aradata.cpp: register 0x9000a.L removed (it used to report the ExtFS
  drives bitmask but I can't recall if it was ever used in the planned
  application for auto-configuration of the BetaDOS's config file).

- hardware.cpp: the ARADATA now handle 18 bytes of HW regs only
  and I plan to convert the remaining mouse information to NatFeats
  so that ARADATA could be removed completely.

- hostfs.cpp: debugging disabled. Proper GPL header added.

- Unix/configure.ac: ZLIB is required only if LILO is enabled so the check
  for ZLIB is not performed when LILO is not enabled (Patrice's idea
  but he was too lazy to do it :)


2003/12/09 - joy
- extfs.cpp: rewritten the initialization of rootPath a bit. And added
  #define DEMO_WEIRD_PROBLEM. That is the "AFROS does not boot" problem
  that is still there and can be easily exhibited just by allocating the
  'A' rootPath earlier in the start process. Note that it somehow affects
  the MFP interrupts which later causes EmuTOS to hang during boot. Very
  weird.

- extfs.{cpp|h}: proper GPL header (this one should be added to ALL files)


2003/12/09 - STanda
  the change from (2003/10/02):
  " Fxattr() now returns the (uint32)MAPVOIDPTO32( fc->index ) instead
    of the host OS' statBuf.st_ino. This is a problem IMO due to that
    the fc->index might change on releaseCookie()/dupCookie(). Proposals?"
  proved wrong. Rolling it back. 


2003/11/28 - joy
- extfs.cpp: made sure the drives[].rootPaths are really initialized to
  a defined value. Also, I don't like functions in header files so moved
  constructor/destructor to the CPP. And it seems to fix the problem
  with freezing EmuTOS due to a MFP problem.


2003/11/27 - joy
- forgotten "extern DSP" declarations removed

* interesting thing: I figured out that AFROS boots on the 0.8.4+ ARAnyM
  if the [HOSTFS] H=<path> is at least 12 bytes long.
  Example: stock AFROS contains just "H=/tmp/". The boot freezes. But if
  this path is extended to "H=/tmp/6789012" AFROS boots. Sounds like
  an encouraging thing to debug... Hopefully not a compiler bug!


2003/11/25 - joy
- Patrice convinced me to do a two years pending rewrite of the hardware
  emulation dispatcher. This is a pretty fundamental change to the deepest
  internals of ARAnyM so please take it with great care and do backup
  all your disk drives first! It may easily destroy all your data if I made
  a mistake somewhere.
  All HW modules are now true dynamically created instances. This fixes
  a number of hidden problems including the crash of DSP emulation thread
  on OS X. It also allowed me to improve and simplify the address dispatcher
  (as has been written in TODO for a looong time).
  Almost all files are affected. Definitely all that emulate HW and a couple
  more. All HW classes are based on BASE_IO now, ICio is gone (why did I
  introduce it? I can't remember).
  The speed impact is non-measurable (on my machine, at least) and the
  source code now looks way better. I am glad I finally rewrote it.
  I also know AFROS does not boot. I have yet to figure out why.

- fdc.cpp: HWget/HWput replaced with much smarter FDC::[sg]etDMAaddr()

- aranym_glue.cpp: REBOOT_OR_HALT is set to HALT now. Rebooting was not
  a good choice (I ended up in an neverending loop of reboots).

- main.cpp: fdc_init() moved to ACSIFDC constructor. Also the ROM->RAM
  first two long words copying moved to InitOS(). HWExit() calling added.

- hardware.cpp: the special case in reading/writing words or longs
  for HW_IDE is finally gone. Now each class can override the handle***
  functions if it wants to catch the word and long access. Hopefully
  nothing breaks after this essential change.

- parameters.cpp: added zero parameters to fix compiler warning about
  missing initializers.

- *.cpp: many "unused parameter" warnings resolved by enclosing unused
  parameters in /* */


* tagged as ARANYM_0_8_3_BETA

2003/11/23 - stefanq
- added darwin folder containing all necessary files to make a Mac OS X
  port of aranym
- Makefile.in: added option -r to target APP_LIB, wich is necessary for 
  darwin.
- configure.ac: corrected the pathes for frameworks for darwin
- input.cpp: added some #ifdef OS_darwin to reflect some differences in 
  the keyboard layout of Apple computers.
- parameters.cpp: changed a %d inside an fprintf() call to %lu to prevent
  a compiler warning.


2003/10/26 - joy
- doc/hguide.txt: written "Threads and Interrupts" chapter. I always
  wanted to document it since I myself had often hard time recalling
  how it was actually implemented.


2003/10/25 - joy
- newcpu.cpp, aranym_glue.cpp: bus error handling code rearranged a bit:
  SDL related code should not pollute the newcpu.cpp. Also tried to fix
  the indentation (in the BUS ERROR handler of the Exception function
  at least, since Milan does not want me to reformat the whole file).

  In case of problems the ARAnyM reaction (reboot or halt) is now common
  for both EPS (exception per second) and DBF (double bus fault) and is
  configurable by defining REBOOT_OR_HALT at compile time.
  If REBOOT_OR_HALT == 1 ARAnyM reboots in case of double bus error or
  bus error loop. Else it halts CPU and quits. By default it reboots.

  EPS code now counts both EPS at same PC and also general EPS (regardless
  of the current PC). Runtime configurable limit is for EPS_PC only, so far.
  The general EPS' limit is configurable at compile time by defining
  EPS_LIMIT to a number. Should be made runtime configurable as well.

  The only missing thing is SDL dialog informing about the situation
  and offering more options. See the /* remarks */ in code.

  Bus errors are not printed on console now. The EPS and DBF patches
  should take care of problems and we are not interested in "normal"
  bus errors.

- TODO: updated (some items removed since they were done already)
- AUTHORS: slight update


2003/10/25 - Xavier
- newcpu.cpp: better fix for double bus errors - CPU restarts now
- main.cpp: display correct EmuTOS build date
- configure.ac: caddr_t final solution
- vm_alloc.cpp: caddr_t cleans the #ifdefs out


2003/10/17 - Xavier
- newcpu.cpp: real trap for double bus errors

- configure.ac: allows to "make depend" on Cygwin and correct end message
  of configure script so that user knows he should "make depend" before "make"

- Makefile.in: sed script in "make depend" more readable

- vmalloc.cpp: correct a build error on Cygwin (an mmap we forgot...)


2003/10/14 - patrice
- newcpu.cpp: added exception per second limiter, configurable in .aranymrc


2003/10/06 - milan
- nfcdrom: another cleanup (destructors) 


2003/10/06 - milan
- newcpu.cpp: Exceptions in JIT handled correctly now, grrr.


2003/10/05 - milan
- BasiliskII sync and cleanup, AMD64 as a host (in 32-bit mode)

- nfcdrom.h: some methods are abstract now

- aranym_glue.cpp: support for compiled mainloop in JIT


** ARAnyM 0.8.2beta released

2003/10/04 - joy
- natfeat/nf_basicset: added OS_TYPE and CPU_TYPE to NF_NAME(1)
- minor TODO update
- Makefile.in: nfcdrom.bos added to install targets
- atari/network/ethernet/README: URL of site about TUN/TAP added
- doc/compiling_for_windows.txt added
- doc/aranym-lilo.txt added
- doc/aranym.1 (man page) - small typo corrected
- include/version.h: increased for 0.8.2beta release


2003/10/04 - Milan
- Bochs sync and cleanup, mainly around CD-ROM support


2003/10/02 - STanda
- Harddisk usage related documentation made up-to-date.
- HOSTFS: cleanup + some new features.
  * Fxattr() now returns the (uint32)MAPVOIDPTO32( fc->index ) instead
    of the host OS' statBuf.st_ino. This is a problem IMO due to that
    the fc->index might change on releaseCookie()/dupCookie(). Proposals?
  * The first fscntl() implementation added.
  * The convertPathA2F() method was removed. This was a legacy code from
    the times when the native implementation had the BetaDOS driver API.
    Now it has the FreeMiNT's XFS API and the BetaDOS' driver API (GEMDOS)
    emulation was stolen from FreeMiNT.
  * The ExtDrive * was added to the XfsCookie and is filled within the
    fetchXFSC() method. This was needed for the cookie2Pathname().
  * xfs_symlink() improved - still not perfect
  * open() modeMint2Host conversion introduced (for the case the stat.h
    is incompatible - not very likely)


2003/09/30 - patrice
- Natfeat CD-ROM driver splitted to ease port to other OS.


2003/09/29 - milan
- Makefile.in: APP_LIB added (hmmm, sorry, diploma thesis, thanks Francois and
  Stefan :-)


2003/09/25 - milan
- configure.ac: OS_TYPE and CPU_TYPE for future natfeat exported to sources

- hostfs.cpp: debuginfo blocked for CVS


2003/09/23 - patrice
- Audio CD players should work now. And data CD-ROMs can be read using any
 iso9660 dos Atari driver.


2003/09/21 - patrice
- Added NF CD-ROM BOS driver. Very simple Atari CD player programs work, but
  some ioctls are still not implemented correctly, and for the moment not
  usable for iso9660 fs access, and only for Linux.
  

2003/09/15 - STanda
- --enable-realstop added to the configure options (default=yes and implies
  the --enable-spcflags-excl option). The STOP condition wait and locking
  was integrated properly to the uae_cpu core.


2003/09/15 - STanda & !joy
- STOP instruction emulation greatly improved. usleep() was replaced with
  SDL_CondWait() - better portable and what's more important - fixing
  jerky mouse movement under new FreeMiNT, fVDI and EmuTOS!


2003/09/10 - joy (comiting patches submitted by Guy Harrison, thanks!)

- Makefile.in: fixes possible conflicts between aranym headers and system ones

- autogen.sh: shouldn't 'make depend' unless it configures...


2003/09/05 - joy
- blitter.cpp, mfp.cpp, rtc.cpp: rid of compiler warning "comparing unsigned
  variable with signed value"

- various files: rid of compiler warning "unused parameter"


2003/09/03 - milan
- CPU flight recorder from BasiliskII ported and SR support added

- ndebug compilation warnings fixed


2003/08/29 - milan
- some compiler warnings solved

- more warnings support with GCC

- inline warnings not showed now

- MONITOR0-9 Emulops for JIT modified


2003/08/15 - milan
- new CPUDEBUG emulops, switches for new internal variable cpu_debugging,
  for CPU debugging

- make dependencies corrected

- gencomp.c: compilation warning cleaned

- md5.h -> aramd5.h : thanks, Guy Harrison

- vm_alloc.cpp: Cygwin workaround, thanks, Xavier Joubert


2003/08/06 - milan
- mingw support cleaned (added to sysdeps.h)


2003/08/05 - milan
- autogen.sh, configure.ac: cleaning, free patch from Guy Harrison for MAKE,
                            xeys problem solved

- configure.ac, lilo.cpp: zlib & lilo support standardized
                          nightmare -> bobek transfer

- Makefile.in: make depend for linux corrected


2003/07/28 - joy
- natfeat/xhdi.cpp: XHInqTarget2 implemented. Also some little cleanup
  (error codes replaced with symbolic names)

- parameters.[cpp,h]: added floppy status ('inserted'). Floppy path correctly
  initialized

- version.h: version increased to 0.8.1 CVS

- SDL GUI: MAX_FILENAME_LENGTH defined in file.h

- newcpu.cpp: exceptions (bombs) are displayed again (dunno who and why
  disabled it)

- parameters.cpp: printing of version at startup is in main_unix.cpp


2003/07/18 - joy
 My little cleanups:
- #ifdef OS_mingw cleaned up. Created a new Unix/mingw_include.h file that
  should be included to a generally available include file (config.h?)
  if the host OS is mingw.

- SDL locks moved from newcpu.cpp to aranym_glue.cpp (let's keep the borrowed
  modules as clean as possible).

- emul_op.cpp: activate_debugger() on 0x71ff disabled as it was crashing
  whole emulation.


2003/07/17 - joy
- src/natfeat/hostfs.cpp: converPathA2F() tried to strip a drive letter
  from base path. Xavier debugged this and patched it to not remove
  the drive letter since it's the HostFS path (and drive letter on Windows
  is important).


2003/07/16 - joy
- src/natfeat/hostfs: a small workaround for a bug in Cygwin's GCC allows
  extending the path buffers back to 2048 chars (thanks to Xavier)


2003/07/13 - joy
- configure.ac: ARANYMHOME quotation mark encapsulation fixed for cygwin
  (thanks to Xavier)

- updated TODO


2003/07/11 - milan
- nice night - some stupid bugs in JIT compiler corrected:
  - compiler_dumpstate() with no previous compilation
  - not ended NEG in sigsegv handler
  - etc. (sorry, it is too late)

- Makefile.in: define -D_REENTRANT -D_THREAD_SAFE

- ata.cpp: CD-ROM product ID corrected for little endian


2003/06/26
- ARANYM_0_8_0_BRANCH merged to main and tagged as _ABANDONED.
  The merge brought just minor JIT and HostFS fixes (see 2003/04/1[25])


2003/06/12 - milan
- configure.ac: ECE support corrected


2003/06/11 - milan
- emul_op.cpp: better OP_MONX


2003/06/10 - milan
- emul_op: new instruction 0x71ff (OP_DEBUGGER) starts debugger if available
           new instructions 0x71fX (OP_MONX) display CPU registers


2003/06/01 - milan
- configure.ac, Makefile.in: MacOS X support updated (thanks, Stefan Kuhr)

- "SDL/" removed from includes, path to SDL headers must be fully defined

- sync with BasiliskII


2003/05/27 - milan
- configure.ac: MacOS X support rewritten (thanks, Stefan Kuhr)


2003/05/26 - milan
- configure.ac, fpu_ieee.cpp: Sparc problem solved, see "2003/04/23 - milan"
  and GCC bugs #8300 and #9763


2003/05/01 - patrice
- minimal ncr5380 scsi emulation to allow Linux boot. Maybe TOS harddisk drivers
  also do not hang anymore: need testing.
- lilo: ramdisk copied to FastRAM, so it is not written over when kernel boots.


2003/04/28 - patrice
- midi: Added option to output bytes sent to MIDI interface in a file.
- lilo: Bugfix, thanks to midi output.


2003/04/25 - patrice
- cfgopts modified so the value given can contain the '=' sign.
  Added Lilo to Aranym: you can boot a Linux/m68k kernel with it.
  MMU support required (and debugged!) for this option.


2003/04/23 - milan
- configure.ac: on Sparc with GCC 3.x use older FPU (UAE), GCC bug workaround

- Makefile.in,configure.ac: small update


2003/04/22 - johan
- fvdidrv.cpp: Reverse transparent mode for vrt_cpyfm corrected.


2003/04/16 - patrice
- Corrected inclusion of SDL headers.
  Removed useless glut library linking.


2003/04/15 - STanda
- hostfs:
  * constant usage cleanup.
  * xfs_creat()/xfs_dev_open() issues fixed (gunzip works properly now)
  * xfs_native_init() improved to be able to handle both the 1.15.x
    and 1.16 (new Dcntl() feature) - reacts on the 0-31 devnums when
    appropriate.


2003/04/12 - joy
- compemu_support.cpp: unnecessary fopen("/dev/zero", O_RDWR) removed.
  This allows running aranym-jit on ARAnyM Demo CD (Knoppix based).


** ARAnyM 0.8.0beta3 released

2003/04/10 - joy
- parameters.cpp: addFilename() has a different order of arguments
  and is able to deal with additional path separators

- cygwin support hopefully perfect now (uses registry to find out the path
  to "My Documents" folder which is used instead of the Unix-ish $HOME).

- hostfs.cpp: char a[2048] - local arrays for filenames now defined with
  MAXPATHNAME2LEN (MAXPATHNAMELEN was already used and I wasn't sure if
  it can be used in the other cases as well).

- !IMPORTANT! With MAXPATHNAME2LEN set to 2048 gcc 3.2 created incorrect
  code on cygwin. Thus both MAXPATHNAME[2]LEN were set to 255 for now.
  I realize it's dangerously low value but if we are suffering from
  stack overwrites we need to go low and re-check all issues again.
  Note that this fixes the wrong mapping of host folders under Cygwin..


2003/04/09 - joy
- parameters.cpp: do not include emu_bochs.h - this breaks some platforms.

- tools_cygwin.cpp: Xavier submits a routine for reading the registry


2003/04/08 - joy
- hostfs.cpp: fixed very annoying bug that was causing bus error when opening
  root of a host drive.

- parameters_cygwin: fixed a bunch of small bugs, now tested and works OK.


2003/04/08 - patrice
- Document autozoom in the [VIDEL] section, and [OPENGL] section, in
  documentation.txt and aranymrc.example


** ARAnyM 0.8.0beta2 released

2003/04/08 - joy
- cfgopts: Thomas correctly suggested to use memmove() for overlapping
  blocks of memory.

- changes made between ARANYM_0_8_0BETA1 and 0_8_0_BETA2 merged to main.


2003/04/07 - patrice
- Preliminary support for mingw compilation suite.


2003/04/07 - STanda
- hostfs.cpp: General debug messages cleanup.
    The st2flags() and flags2st() methods fixed (a need for open()).
    The isPathValid() method removed (was only useful for aranymfs.dos).
    Dpathconf(8-9) added and 7 fixed (Thing has a bug in 1.27 here IIRC).


2003/04/07 - joy
- configure.ac: parameters.cpp and its children updated. Should be ready
  for adding more cygwin specific functions.


2003/04/06 - joy
- parameters.cpp: '-S' handling corrected. Small cleanup in getopt()..

- natfeat/ethernet.cpp: back to execp(), now starting of 'aratapif'
  works OK thanks to use of _exit().

- parameters.cpp: cleanup in getConf/DataFilename(). Now uses 'callbacks'
  for obtaining the folder path. These callbacks are defined for Unix
  and for Cygwin so far (Cygwin needs a different handling). Hacks 
  with "--datadir=/" removed completely. Thanks to Xavier for the Win32
  related information and ideas.

- Unix/cygwin: new folder with tools_cygwin.cpp and parameters_cygwin.cpp.
  The Makefile.in was not updated yet.. Trying to find a more flexible
  way than copying things from parameters_unix to parameters_linux...


2003/04/03 - STanda
- hostfs.*: general clean up

- tools.*: The 32bit <-> host mapping for systems with non 32bit
  void* and int. Several other functions were moved to the tools.h.


2003/04/01 - joy & Honza/ATACK
- main_unix.cpp: segfault on gentoo (where the argv[0] does not contain
  the path (only filename)).

- natfeat/ethernet.cpp: missing ethX definition in DEBUG() statement


2003/03/30 - joy
- cygwin gets its own folder with a tools.cpp file.

- sdlgui.cpp really needs the explicit conversion of the path. Xavier was
  right, after all.


2003/03/29 - milan
- Joy's version capabilities implemented

- infoprint as cname for panicbug, sorry Joy

- man page from debian added


2003/03/28 - STanda & joy
- natfeat/hostfs.cpp: DIRSEPARATOR used wherever possible. Might fix HostFS
  on Windows.

- parameters.cpp: DATADIR can't be relative so now it checks for "//"
  (configure --datadir="/") and then ARAnyM uses the path to the binary
  as the DATADIR path (fixed later the same day)


2003/03/27 - joy
- parameters.cpp: correction and clarification of "-d" command line switch

- input.cpp: a key for generating screenshots changed to "PrintScreen"
  (the Alt+PrintScreen collided with Linux kernel hacking SysRq combination)

- [ARANYMFS] config file block header changed to [HOSTFS]. The [ARANYMFS]
  is still read in case [HOSTFS] is not found in the config file. But in near
  future ARAnyM will stop reading the old [ARANYMFS]. Updating your config
  file automatically is as easy as starting aranym with -s. After that you
  may just remove the [ARANYMFS] block from your config file.

- user-specific files ("config", "nvram") are stored in subfolder ".aranym"
  in the $HOME folder. If $HOME is not defined, $USERPROFILE is used instead
  (Windows 2000). If neither $HOME nor $USERPROFILE is defined then the path
  to the ARAnyM binary is used.

- system-wide data files ("ROM", "etos512k.img", "font8.bmp") are stored
  in subfolder "aranym" in the "/usr/local/share" folder (by default). This
  folder can be changed in configure by --datadir=<path>. If this folder
  is defined as 1 char long path ("." for the actual folder) or is empty
  then ARAnyM tries to use the path to the ARAnyM binary instead.

- DIR_SEPARATOR renamed to DIRSEPARATOR and corrected (it's been already
  used in several places).


2003/03/27 - milan
- configure.ac: DIR_SEPARATOR added.

2003/03/26 - milan
- JIT games, sync with BailiskII


2003/03/24 - milan
- Solaris support updated

- one paranoia "volatile" fix in CPU


** ARAnyM 0.8.0beta1 released

2003/03/24 - joy
- aranym.xfs renamed to hostfs.xfs

- new binary drivers (hostfs.dos, hostfs.xfs, aranym.xif, nfeth-config)
  added to CVS.

- Makefile.in: installs new hostfs (instead of old aranymfs) and also
  new aranym.xif plus utilities.

- aranym.spec: updated for new release, install new files.

- doc/documentation.txt: slight update (regarding BetaDOS only)


2003/03/23 - joy
- nfeth-config.sh: added, calls araethip and shows how easy is to configure
  the device automagically.

- araether.c: AUTO_IP_CONFIGURE (automatical internal configuration of
  eth addr and netmask) added but is not working well, thus disabled by
  default. Also the DEBUG(()) system doesn't seem to work so I wrote
  mine for the ioctl() - can be enabled by defining MY_DEBUG.

- renamed things: "araeth*" -> "ethernet", "araethip" -> "nfeth-config"

- atari/hostfs/README, atari/network/ethernet/README: updated

- 'aratapif' started by 'execv()' from the same folder where aranym was
  started from. Also a couple of checks for file owner and setuid bit
  added so users get warnings if chown/chmod was not applied to aratapif.

- version.h updated to 0.8.0beta1

- configure.ac, Makefile.in: renamed "pif" to "ifc" and "arapif" to "tapif"

- TODO, BUGS, INSTALL, NEWS, README and other files updated.


2003/03/22 - joy
- [ETH0] settings in the config file

- aranym_xfs.c: ifdef'ed one debug print

- araethip.c: improved and adapted for possible many eth devices


2003/03/21 - joy
- networking: NF API extended to allow emulating more than 1 network card

- aranym.xif: added SIOCGIF modes to autoconfigure the device with its IP
  and netmask.

- natfeat/ethernet.cpp: initialization corrected. The XIF should not install
  on atari side unless the host initialization was finished OK.


2003/03/20 - STanda
- hostfs.cpp: mapping improved.

- .DOS/.XFS:  .xfs works now just like the MetaDOS's driver
  it maps all the drives under the same driver letters.
  It goes through the [aranymfs] for the mapping.
  After a conversation with Frank Naumann I conclude that
  the M(B)etaDOS/ExtenDOS would not work with the 1.16 FreeMiNT
  kernel line. So do not use the .dos driver there as the
  very same thing is provided by the .xfs there now.
  The configuration stays the same.

- aranym_xfs.c: the source can be swithed to use the Dcntl()
  to map the drives, but in that case you can't get the single
  letter mountpoints.


2003/03/19 - STanda
- hostfs.cpp: the metados hostfs.dos driver simply sets the mapping the
  same way as aranymfs.dos. No change for the user.
  NOTE: Do not use aranymfs.dos driver. It doesn't work under
  FreeMiNT 1.16 kernel

- aranym.xfs: now mounts the [aranymfs] mountpoints to U:/GG
  (need to develop a hack to map that to U:\G only /single letter mount
   point) - not via Dcntl() which looks in BIOS in this case)


2003/03/18 - milan
- P4 fix for JIT compiler

- sync with BasiliskII


2003/03/17 - milan
- FPU updated, preparation for K8


2003/03/17 - STanda
- hostfs.cpp: the chattr/chmod functions ported from STonX. Not tested.
  It just compiles ATM.


2003/03/16 - joy
- natfeat/doc/native.txt updated (used Laurent's latest version without
  the NF_CONTROL stuff and with corrected unsigned long ID).

- TODO updated

- natfeat/ethernet.cpp, atari/network/araeth/araether.c: subIDs are now
  defined in a separate header file named araether_nfapi.h. This should
  make the connection between host side and atari side of the natfeat
  clearly visible.

- natfeat/ethernet.cpp: getting of IP addresses added. Used in a separate
  program called 'araethip'. Version of the arether_nfapi must have been
  increased so update your aranym.xif binary.

- atari/network/araeth/getparams/araethip.c added. Can be run from MiNT's
  rc.net to call the ifconfig and route with proper IP addresses.

- atari/network/araeth/README: updated with info about 'aratapif' and
  the tunnel device - simply about getting the whole thing working.
  'araethip' is not covered yet in this README.


2003/03/15 - joy
- major rewrite of the aratapif (ARAnyM TAP IFconfig) and related
  updates in natfeat/ethernet.cpp. Now it actually works!


2003/03/14 - joy
- dsp_cpu.cpp, araifc/inet.c: small fixes to remove GCC warnings


2003/03/13 - milan
- IDE: sync with bochs, BeOS, Cygwin, Darwin

- araifc integration


2003/03/12 - STanda
- hostfs.cpp: fake methods for chattr, chmode, chown and some more.
  The report the fakeness to the host OS console in debug mode ATM.

- araifc (ARAnyM ifconfig implementation for tuntap)


2003/03/12 - milan
- list of supported OS updated

- Makefile.in: diskimage cleaning 


2003/03/11 - STanda
- aratapif: made working even in nondebug mode. The exec() arguments
  needs to be put into the child process adress space to be able to
  execute any binary.

- BetaDOS 3.12: works correctly with the hostfs.dos driver here it
  seems. Please test the driver throughly. It gives you the long names
  also under FreeMiNT (unlike the aranymfs.dos which does not work
  at all in my 1.16 setup - it does in 1.15.12 however)


2003/03/07 - joy
- aranym.spec: paths to share/aranym had to be corrected (though I'd say
  they were OK previously and that our Makefile install: is wrong)


2003/03/06 - joy
- external configuration tool for the setting up the tap0 device


2003/03/05 - STanda
- small fix in hostfs/metados/main.c


2003/03/04 - joy
- ata.[cpp|h], parameters.[cpp|h] cleaned up:  obsolete disk_options_t
  and cdrom_options_t structures removed. Everything is stored in the
  atadevice_options_t now. Nice bonus is the possibility of naming the IDE
  device with new config option "ModelName" (string, up to 40 characters).


2003/03/02 - joy
- natfeat/atari_example_gfa.lst: example for GFA Basic programmers
- natfeat/atari_example.c: updated for Ssystem() call


2003/03/01 - joy
- parameters.[cpp|h]: single partition devices under the SCSI nickname
  need the partition ID to be configurable

- natfeat/nf_base.cpp: added, contains Atari<->Host memcpy and strcpy
  functions (taken from hostfs.cpp).

- hostfs: major NF API clean up. Versioning added. HOSTFS is Supervisor
  only now. Also the mount point in MiNT is "U:\hostfs" now.


2003/02/28 - joy
- natfeat/ethernet.cpp: getHWaddr takes exactly 6 bytes and it's not a string
  so no EOS should be added. Thus strncpy changed to memcpy.


2003/02/27 - joy
- Ethernet: README of aranym.xif made clearer, IP addresses in ece.cpp
  configurable by #define and the default ATARI IP address changed to
  192.168.0.2 (to prevent users from asking a question why it was .5).

- natfeat/ece.cpp renamed to ethernet.cpp

- NatFeat "ECE" dropped, new NatFeat "ETHERNET" with different API supporting
  also versioning and allows passing the interrupt level and MAC address
  from the host side. Also the ETHERNET NF is Supervisor only (naturally).


2003/02/26 - joy
- ETHERNET_OLD (the one from Basilisk) removed completely

- Networking now at interrupt level 3 (Audio stays at int level 5)

- parameters.cpp: "--swap-ide" command line switch added (exchanges IDE0
  and IDE1 drives). I find it useful for preparing new disk images..

- parameters.[cpp|h]: get ready for SCSI disks ([DISK0-7]) (single
  partition mounting)


2003/02/26 - STanda & joy
- natfeat/ece.cpp: after removing hostScreen.lock and one unfortunate D(bug)
  it started working. Wonderful. TODO: change interrupt (probably to INT3).
  Also would be good if root privileges for tuntap weren't necessary.

- "araeth" -> "eth" rename


2003/02/20 - joy
- videl.cpp: fixed wrong st_shift reset, removed VIDEL regs initialization
  (since EmuTOS now initializes VIDEL properly). Startup color depth
  of host window is 8bit now (should be enough).


2003/02/19 - STanda
- fvdidrv.cpp: the expandArea M->M for bitplanes fixed
  The only TODO for full bitplane support is to support non-word
  aligned blits and expands.
  ... next shift (evening) ... the VDI pen -> TOS colors reduced
  only to proper setting of the palette (see getTosColor() method).


2003/02/18 - STanda
- fvdidrv.cpp: the bitplane modes improved. Up to the 4bit mode
  everything works well. The 8bit mode is on the way. There is still
  some little imperfection there.


2003/02/18 - joy
- videl.cpp: writing to f_shift resets the st_shift and that fixes
  the color depth detection routine.


2003/02/17 - STanda
- BeOS patches for extfs.cpp and natfeat/hostfs.cpp


2003/02/16 - joy
- cleanup in src/natfeat - fundamental NF functions grouped in 'basicset'
- cleanup in emulop.cpp - removed everything that has a NF replacement
- cleanup in araobjs.cpp - removed everything that is in src/natfeat as well
- NF_SHUTDOWN added


2003/02/12 - STanda
- tools/createdisk: rewritten into 'sh' syntax and tested on
  Solaris/HPUX/FreeBSD (all due to the clarity of the FreeBSD distribution
  requested) 
  * you can create image of whatever size and pretty fast (we are using
    lseek() there now and so on ext2 you can create and image file bigger
    than your available space ;))
  * You need not to use the mbrdata file if you don't need it. See the usage
    notes for more.
  

2003/02/09 - patrice
- ikbd.cpp: corrected SendMouseMotion() which don't modify the buttons variable
  anymore.

- hostscreen.cpp, parameters.cpp: added 'Filtered' property to [OPENGL] section
  if you want do enable/disable linear filtering for screen rendering.


2003/02/04 - joy
- input.cpp: fixed a long-standing bug with automatic mouse grab upon
  entering the ARAnyM window. This didn't work correctly when the ARAnyM
  window didn't have input focus.

- ikbd.cpp: there is a bug in the algorithm of compressing the mouse
  packets. I added a simple workaround but in the future this should be
  fixed properly.

- input.cpp: added a warning when the SDL reports weird mouse relative
  motion event. Such event is reset otherwise our mouse would get mad.
  I am wondering why SDL reports such scary values for relative motion..


2003/01/29 - milan
- Makefile.in: corrected, floppy.sh is executable

- memory.h: ISO C++


** ARAnyM 0.7.0 released

2003/01/29 - joy
- xhdi.cpp: used off_t in fseek hoping that this would make it LFS compatible

- Makefile.in, aranym.spec: three more contrib files added for installation


2003/01/16 - milan
- configure.ac: support for large files (>2GB)
                corrected support for OpenGL


2003/01/15 - STanda

- fVDI: The drawMouse() hot_x/hot_y are stripped to 4 bits.
=       The m68k driver had a bug in the parameter passing for drawMouse()
        so DO NOT FORGET to update your disk images.


2003/01/14 - STanda

- fVDI: The drawMouse() calling fixed for the natfeat dispatch.
  The mouse color should be OK again. And... EmuTOS works with
  fVDI since now.

 
2003/01/12 - joy

- natfeat/atari_example.c improved (using function pointers now)

- include/version.h improved (automatically appends "CVS_date_"
  to unoficial builds)


2003/01/11 - joy

- "__NF" cookie fixed - now the structure contains pointers to nfID and
  nfCall.

- src/natfeat/atari_example.c updated - it's now based on the __NF cookie
  only.


2003/01/10 - joy
- tools/diskimage.c: a tool for creating disk images up to 32 GB large.
  Note that our IDE emulation is limited to 2 GB disks for now. Will be
  fixed soon, hopefully.


2003/01/09 - joy
- fixed _SND cookie value: now it contains just '4' to indicate that no
  hardware is available except of XBIOS functions. If DSP emulation is
  compiled in and active the _SND cookie contains %00001100 (according
  to recent info in mailing list the 3rd bit means DSP).

- improved the patch of TOS 4.04 again - this time added "__NF" cookie
  (untested yet) and also a nice example of how cool the boot logo may be.

- Didier updated audio driver to use NatFeats when available...


2002/12/29 - joy
- videl: Sébastien Briais sent a patch that allows virtual screen on VIDEL
  by emulating the 'linewidth' and 'lineoffset' VIDEL registers.

- videl: the 'od_posledni_zmeny' variable translated to English, at last.


2002/12/19 - STanda
- the atari/network/araeth aranym.xif for ECE (ethernet card emulation)
  added. It doesn't work ... see the README there.
  nb: The ether_unix.cpp;emul_op.cpp;include/ether*.h may be removed
      I left them in place until it all actually runs with my
      implementation
- Installation and BUGS section added into the atari/hostfs/README


2002/12/16 - STanda
- several cleanups regarding the extfs and hostfs (main.cpp, nf_objs.cpp)
- STL bugfix in natfeat/hostfs.h (the std namespace usage)


2002/12/14 - johan
- Special handling of 32 bit vro_cpyfm D=S mode (see 2002/09/28).
- Mode handling for screen->screen blits.
- Updated fvdi.prg, aranym.sys and fvdi.sys.


2002/12/10 - STanda
- extfs: interface & debug cleanup
- hostfs: completely new NatFeat driven implementation of the host OS
  filesystem access. The m68k implementation in in atari/hostfs folder.
  Read the README placed there.


2002/11/30 - patrice
- videl: autozoom does not work correctly if target is smaller than source.
- hostscreen: added OpenGL rendering for the Atari screen.


2002/11/09 - milan
- sync with BasiliskII: some obsolete structures removed, support for Opteron


2002/11/06 - joy
- aranym can be compiled without the DSP emulation again
- ulong in nf_stderr fixed to uint32


2002/11/03 - joy
- XHDI - returning values corrected


2002/10/29 - Didier & joy
- found and fixed serious buffer overflow in uae_cpu/readcpu.cpp.
  EMULOP_RETURN (unused), NATFEAT_ID and NATFEAT_CALL should behave
  better now.


2002/10/28 - joy
- NF_STDERR added to NatFeats

- NF_VERSION corrected (should display version of NatFeat API, not version
  of aranym)

- new cmdline option "-e" (--emutos) enforces EmuTOS boot.


2002/10/22 - johan
- fVDI driver NatFeat support added.


2002/10/20 - joy (version 0.6.8-beta)
- NatFeat instruction opcodes changed back to good old $7300/$7301.
  The LineF interface requires the $fe0x instructions to be long words
  and I am not ready to accept such change of NatFeat calling convention.


2002/10/19 - joy (version 0.6.7-beta2 - NatFeat opcode change!)
- GFA Basic "fix" - it writes 0x16 to IKBD and then waits for a joystick
  packet in an endless loop. So we are sending a joy packet now.

- NatFeat instruction codes changed to unused LineF ones: $fe00 and $fe01.
  Hope that this will make all future ColdFire CPU users happy ;-)

- cosmetic changes (aranym prints its version and compile date on startup)

- new "readonly" parameter to [IDE] config replaces the "xhdiWrite" but works
  generally - i.e. allows opening disk images on CD-ROMs (suitable for our
  aranym CD)

- CD-ROM in GUI features [Insert] / [Eject] button now


2002/10/15 - milan
- Mac OS X: keyboard scancode workaround

- non-cheaders support (for MipsPro C/C++ compiler)

- cleanups in classes MFP_timer, ndebug, in macros around ADDRESSING modes
  etc.

- FAQ: changes around disks


2002/10/14 - milan
- configure & etc.: generic bool, volatile and inline handling


2002/10/13 - joy
- fixed CDROM mount/unmount support
- fixed FastRAM max size check on Linux with real addressing and no JIT
- added CD-ROM automount (like on real Atari :-)


2002/10/13 - milan
- sync with BasiliskII CVS

- JIT compiler: NOP filler based on binutils (default)
                Gwenole added some checks

- Mac OS X: some small corrections

- xBSD: sigsegv handler setting for JIT compiler corrected


2002/10/12 - milan
- sync with BasiliskII CVS

- JIT compiler: tune_alignment as configuration feature (TuneAlignment)
                new management of blockinfos

- cpuotpi "disabled" - not used now, needs reimplementig

- IDE: sync with Bochs CVS (only some small corrections in debug messages,
  result data of the ATAPI command 'inquiry' fixed, added multiple cdrom
  support for win32 - still not used)

- dialog.cpp: enabled Discs, the 1st CDROM driver mount/unmount


** ARAnyM 0.6.6 released

2002/10/10 - patrice  (version 0.6.6-beta)
- dsp: dsp nothread code removed.
- configure: DSP is enabled by default now


2002/10/09 - milan
- sigsegv_linux.cpp: x86 F6 instructions was badly decoded. NOT8, NEG8, IDIV8,
                     MUL8, IMUL8 implemented, TEST8 corrected

2002/10/08 - joy (version 0.6.5-beta)
- the major arch change in version 0.6.0 has been reverted. CPU is running
  in the main thread again. SDL_Timer thread is back on all platforms but
  it's not doing anything but setting up a CPU flag that is being checked
  in CPU inner loop, in do_specialties().

  Advantages:
  - all SDL activity is in the main thread automagically
  - should fix all the troubles with non-Linux host operating systems

 TODO:
 - check if the overall performance of ARAnyM is not worse than before
 - make sure the keyboard is checked under all circumstances (STOP insn,
   CPU crash, deep JIT loop, ...?) so we won't lose the control over aranym.


2002/10/03 - milan
- ndebug supports breakpoints


2002/10/02 - milan
- add raw_cmp_b_mi() and raw_call_m_indexed() for generated, not used now,
  BasiliskII used translated main loop now, ARAnyM not - it's main loop is
  more complicated

- x86 calls in loops removed as in BasiliskII but for another reason, not
  enough stable for newer versions of compilers, in some cases slower

- for OpenBSD dirent.h again in sysdeps.h

- preversion of JIT compiler support for OpenBSD/i386, later I will enable
  it also for NetBSD/i38 and FreeBSD/i386


2002/10/01 - patrice
- ikbd: Joystick support bugfixed.


2002/10/01 - milan
- use off_t for file offsets in IDE emulation (from Bochs), sync with Bochs

- for SGI/Irix SystemV opendir used

- for Solaris dirent.h again in sysdeps.h


2002/09/30 - milan
- v&V commands added to ndebug, (<address>) vs. <value> operations

- typo fix in configure.ac script


2002/09/28 - joy (version 0.6.4-beta)
- XHDI writing to disk fixed. Previously it was appending the new records
  at the end of the disk image file so it did not destroy any data but
  made the disk image larger. Now it's fixed and rewrites real data in the
  disk image so make sure you have 'XhdiWrite' set to 'No' in your aranym
  config file if you want to preserve your data intact.


2002/09/28 - joy (version 0.6.3-beta)
- fixed #ifdef NEED_TO_DEBUG_BADLY code

- BUS ERROR loops are detected and back trace is displayed (the latter only
  if fullhistory was enabled at compile time)

- display better info when exception occurs (NPC = new PC = the exception
  handler address, SP = stack pointer)

- irritating bus error loops that occur when 68000-only application tries to
  catch bus error by its own (PureC IDE) should be fixed now.


2002/09/28 - johan (version 0.6.2-beta)
- Special handling of vro_cpyfm D=S mode for performance improvement.
  No loop unrolling yet, and only implemented for 16 bit mode.


2002/09/27 - patrice
- acia, ikbd, midi emulation updated. Preliminary joystick support (emulated
  joystick 0 on IKBD).


2002/09/25 - milan
- sync with bochs (4 internal ATA channels)


2002/09/24 - milan
- sync with BasiliskII (cleanups, jumps align corrected)


2002/09/24 - patrice (version 0.6.1-beta)
- videl: bugfixes, Atari screen centered on host screen, autozoom feature
  added (with and without integer coefficients).


2002/09/23 - patrice
- hostscreen: modified to select the nearest best video mode.
- videl: modified to render from any bpp to any bpp, using any screen pitch.


2002/09/20 - patrice
- DSP: bit-reversed addressing fixed, host port transfer when threaded fixed
       use of C++ constructor/destructor for the DSP class.


2002/09/15 - joy (version 0.6.0-alpha)
- major architectural change: SDL_Timer stuff removed, #define USE_TIMERS
  removed. Now CPU emulation runs in a separate SDL thread and the main thread
  just loops (waits for 10ms, executes 'invoke200HzInterrupt' and loops back).

  Advantages:
  - VIDEL screen redraw runs in the main SDL thread - that should make 
    many host operating systems happier (please report)
  - immediate reaction to hotkeys (Quit, GUI etc)
  - same (or even higher) speed as previously (82 kdhrystones on XP 1G7+)

  TODO: everything that makes use of SDL functions should be moved to the
  main thread. This includes fVDI (actually hostscreen) and GUI. The GUI
  could probably simply replace the current main_loop. With fVDI the problem
  is more complicated. We will probably have to send all fVDI actions
  from the CPU thread to the main thread using some sort of IPC.


2002/09/12 - joy (version 0.5.0-beta)
- TOS was not ready for large 68040 caches that are provided by JIT compiler.
  I added a few missing 68040 cache patches that were developed by Douglas
  originally.
- version increased to 0.5.0-beta1 (version 0.4.0 was for working DSP and
  0.3.0 for JIT CPU)


2002/09/12 - milan
- sigsegv_linux.cpp: set_eflags()

- cpuopti.c, compemu_support.cpp: workaround for gcc 3.x

- tools/memory.h.patch: for a bit better access to HW space for JIT compiler,
                        unofficial!


2002/09/10 - milan
- autoconf 2.53+ needed now

- ndebug.cpp, newcpu.cpp: ISO C++ forbids assignment of arrays, so Patrice's
                          patch completed


2002/09/07 - joy (commiting for milan)
- newcpu.cpp - flush_icache(0) is required otherwise JIT does not work


2002/09/05 - milan
- DIV8, TEST8 implemented (not tested)
- AND8, OR8, ORIMM8 now handle flags


2002/09/01 - milan
- some small (not tested) corrections in FPU emulation code (UAE&i386 versions)


2002/08/28 - patrice
- DSP: host port read not working with thread, fixed


2002/08/27 - patrice
- Thread support for DSP bugfixed.


2002/08/26 - joy
- JIT (actually sigsegv handler) fixed again, better this time.


2002/08/26 - patrice
- DSP emulation can be run in its own thread.


2002/08/26 - milan
- sigsegv_linux.cpp: CMP8 much better

- hardware.cpp: in_handler handled in all HW_SIGSEGV configurations

- ata.cpp, ide.cpp: real 32-bit access, word swap added for I/O operations,
                    io write to 0xf00005 handled (error register)

- uae_cpu/newcpu.cpp: jump table for distributed dispatcher generated
                      corretcly on little endian platforms now


2002/08/13 - joy
- NF_Name() now returns the number of characters (excluding the trailing '\0')
  which would have been written to the final string if enough space had been
  available.


2002/08/12 - joy
- nf_call changed to return a signed 32-bit number (type 'long' in C lang.)
- nf_call for invalid NatFeat ID returns an undefined value now.


2002/08/11 - joy
- NatFeats now keep their name and SupervisorRequired flag with them.

- NatFeats main dispatcher now checks for user/supervisor mode and throws
  privilege instruction exception if appropriate.

- NatFeats main dispatcher does not copy parameters to local array. NatFeats
  themselves fetch the parameters with getParameter() call.

- final renaming: "natfea" -> "natfeat", "_rcall" -> "_call"

- various doc bits found in mailing list stored in src/natfeat/doc folder.
  It's partially obsolete but I tried to update at least the native.txt.

- example of running some basic NatFeats for (not only) PureC stored
  in src/natfeat/atari_example.c


2002/08/08 - patrice
- DSP: CCR-related stuff written, some bugfixes.


2002/08/05 - joy
- NATFEA_ID and NATFEA_RCALL can now be used in User mode as well. Supervisor
  mode is not required. NatFeats themselves have to throw illegal instruction
  exception if they require Supervisor mode and are called from User mode.

- little clean up in the NatFeats dispatcher. It now detects wrong address
  and throws proper BUS ERROR.


2002/08/04 - joy (version 0.3.0b1)
- Native Features implemented. The CPU recognizes two new instructions:
  NATFEA_ID (opcode $7300) and
  NATFEA_RCALL (opcode $7301).
  These instructions are privileged (can be executed in supervisor mode only).

- Two new basic NatFeats (Native Features) implemented:
  "NF_NAME" returns the name of "emulator" in a given string buffer.
  "NF_VERSION" returns the version of "emulator" encoded in long hex number.

- XHDI was adapted for NF "XHDI" (still callable also via old EmulOp but
  that's deprecated and will be removed before release).


2002/08/03 - johan
- Native part of fVDI driver updated to work with new API (dependencies
  on internal fVDI structures removed, parameters passed on the stack).
- Some internal fixes and cleanups in the native part of the driver.
- New binaries for both the fVDI engine and the m68k part of the driver
  are needed, and are also checked in.
  

2002/08/02 - joy
- EmuTOS loading fixed again - it can be any (>0) size now.
- EmuTOS loading routine display the date when the EmuTOS was built.
- XHDI support moved to separate xhdi.[ch] file and XHDIDriver class.
  XHReadWrite() implemented. Old DMAread EmulOp is deprecated now.
- XHReadWrite() writes to disk only if XdhiWrite switch in config file.
- nearly all compile time warnings removed!


2002/08/01 - joy
- EmuTOS image size can be either 256 or 512 kB long
- two serious bugs in linux sigsegv handler fixed: OR and MOV. There are
  more bugs in the ia32 emulated routine, unfortunately. JIT won't work
  until all of them get fixed.


2002/07/31 - patrice
- DSP emulator: Many bugs fixed (end of dsp_*.cpp files for complete changes)


2002/07/31 - joy
- bug in fresh IDE emulation code fixed (thanks Johan and Standa)


2002/07/26 - patrice
- dsp_cpu.cpp: lua operation and read_memory fixed
- dsp_disasm.cpp: Added missing '\n' in disasm output


2002/07/23 - patrice
- ndebug.cpp: Make it gcc-3 friendly.
- dsp.cpp: Added mu-law table generator
- dsp_disasm.cpp: Changed all output from D(bug()) to fprintf()
- yamaha.cpp, dsp_cpu.cpp: Removed useless #include "config.h"


2002/07/23 - milan
- support for cdrom under MacOS X ported from Bochs, not tested yet
- updated IDE emulation, some error states detected more correctly now


** ARAnyM 0.2.0 released

2002/07/20 - joy
- saving/restoring screen background under SDL GUI fixed

- SDL GUI now survives resolution change without a crash but the dialog
  is not redrawn correctly yet.

- hostScreen::update() now always update the mainSurface (the physical one).
  Updating the logical (when GUI is opened the background) surface is IMHO
  not required and it also caused problems when updating the screen upon
  GUI closing.

- OS loading changed: first TOS 4.04 is tried and if fails then EmuTOS
  is tried. If even that fails (which should not since we include EmuTOS
  in ARAnyM binary distribution now) then a warning and an advice for 
  obtaining the EmuTOS is displayed.

- the window mover now displays an advice for pressing the Pause key
  for opening the GUI.


2002/07/20 - patrice
- Dsp: more bugfixes, see end of dsp_[cpu|disasm].cpp file for complete
  changelog


2002/07/19 - joy
- SDL GUI now stores background to another (cloned) surface. Also fVDI
  does not draw into the physical video surface when GUI is visible.

- GUI Reset option works.

- if GUI font8.bmp is not loaded the GUI is not accessible


2002/07/18 - joy
- DSP host code is disabled when DSP_EMULATION is not defined. This was
  required to get Alt+Ctrl+Del warm boot working again (there must be a bug
  in current DSP emulation).

- trying to enforce releasing the Alt+Ctrl keys after Alt+Ctrl+Esc combo
  that causes ARAnyM to drop the mouse/keyboard exclusive control.


2002/07/16 - joy
- fixed pretty scary bug in yamaha.cpp. As a direct result PARCP started 
  working reliably.


2002/07/16 - milan
- hguide.txt: updated, added section 9 (Checking memory boundary)

- hwsp possibility of checking memory boundary corrected

- linux_sigsegv.cpp: Added support for MOVSX8, MOVZX8, OR8, MOV8


2002/07/16 - patrice
- Host port reworked. More bugfixes and completion of the emulator.
  DspDebug can be started, it finds the DSP.


2002/07/15 - milan
- main.cpp: SDL_Delay on exit increased (for slower machines)

- sigsegv_linux.cpp, memory.h, fakeio.cpp: extended sigsegv handler upgraded


2002/07/10 - patrice
- I finished nearly all intructions. I also added a disassembler
  (disabled by default but you can enable it with --enable-dspdisasm)


2002/07/09 - joy
- DSP integrated properly in the autoconfig system. By default it's disabled
  but you can enable it with --enable-dsp in configure phase.


2002/07/08 - patrice
- DSP 56001 emulation started. It is not finished, but I think it has
  a good shape. I wanted to do this because I would like to be able
  to run DSP development tools under Aranym, to assemble DSP programs.
  I used the Motorola DSP56000UM/AD book as documentation.
  Consider this as v0.000000001 stuff (unstable, bugged, incomplete).


2002/07/03 - milan
- JIT compiler: some minor corrections in JIT

- sigsegv_linux.cpp, memory.h: new memory access for x86/linux added
    - without direct check of memory boundary (extended sigsegv handler)


2002/07/01 - STanda
- The filename -> 8.3 format transformation adjusted. Now it should handle
  also the filenames ending with a dot (.). These should be appended with
  a hash code as an extension.


2002/06/26 - joy
- SDL GUI integrated properly: it is now running in its own SDL thread
  so it's able to run in parallel with Atari emulation. The input events
  are still fetched in the Timer thread and are passed to the GUI thread
  via a couple of global variables (should be reworked to a FIFO buffer).
  Still needs to fix the screen double buffering...
  A whole set of dialogs should be designed for ARAnyM now (see dialog.cpp).

- TOS loading routine now requires the original TOS 4.04 only - the other
  patched flavors of TOS 4.04 are not accepted since now on. The prepatched
  versions made it harder for us to add or remove various patches. Thus
  we won't support them.

- romdiff.cpp does not patch out the RESET instruction anymore. It was patched
  out on Afterburner040 because that machine didn't really like the RESET.
  ARAnyM handles reset gracefully so there's no reason to patch it out.

- aranym_glue.cpp: added hardware initialization on the RESET instruction.
  So far only IKBD is initialized (as there were problems with IKBD after
  reset).


2002/06/24 - joy
- do_get_real_addr() replaced with Atari2HostAddr() in fdc.cpp and audio.cpp
- ExitAll()/QuitEmulator() reworked to allow clean exit from debugger even on
  slow machines (the timer thread must be stopped first before the Atari
  memory is released).


2002/06/24 - STanda
- fvdidrv.*, videl.*, extfs.* cleanup. The memptr usage introduced. There
  should be no (or at least less) problems with the ia64 compilation.


2002/06/09 - joy
- SDL GUI restores original background (see hostScreen.save_bkg/restore_bkg)
- SDL GUI "Quit" works


2002/06/07 - joy
- ScrollLock switches between fullscreen and windowed mode
- in window mode you'll get a 'heart beat' - an activity indicator
- SDL GUI is enabled by default now (can be disabled with --disable-gui)
  press Pause key to invoke it.


2002/05/27 - milan
- vm_alloc.*: the lastest changes discarded, problems during configure

- newcpu.cpp: SDL_mutex for exclusive spcflags handling initialised


2002/05/24 - joy
- as suggested by Heiko I added a complete locking to the virtual IKBD queue.
  Let's see if it works OK or if the mouse/keyboard is not working properly.


2002/05/22 - STanda
- The aranymfs atari sources updated. The MetaDOS part was converted
  into the gcc compilable code (Makefile created) and the mint .XFS
  source was added.
  The binaries (.bz2 packed) was updated with the newly compiled files.
  You might want to try them to test whether they work as the previous
  ones.
- atari/fvdi/utility/fvdicout: The Ptermres should be now filled with
  a correct value IMHO. 


2002/05/20 - Heiko Achilles
- when a mouse movement package is fetched from the ACIA/IKBD buffer this
  patch puts all movements of the same type, which are currently in the
  buffer, into one. So the fetching is quicker and there's no noticeable
  mouse delay anymore.
  TODO: replace bool inGet with proper semaphores


2002/05/14 - milan
- vm_alloc.cpp: better structure, not own OS dependent includes

- main.cpp, main_unix.cpp, aranym_glue.cpp, cpu_emulation.h:
    some debug outputs added for JIT compiler
    a small reform in memory allocation
    one stupid bug (of course, I'm the author) found in QuitEmulator
    (vm_release(nil))

- JIT compiler: one debug output added for segfault handler of JIT compiler


2002/05/12 - milan (record in ChangeLog by joy)
- ata.cpp: updated to bochs' latest source (supported SEEK and something else)


2002/05/10 - milan (record in ChangeLog by joy)
- input.cpp: hack for remounting CD on Ctrl+SysRq, needs to be removed!
- gencpu.cpp: lotsa weird changes, probably related to distributed dispatcher
- newcpu.cpp: minor distributed dispatcher related changes
- JIT compiler: one segfault fixed


2002/04/29 - joy
- ErrorAlert() has been replaced with panicbug() as I needed sprintf
  like parameter parsing. Now all file errors in main() report also
  the problematic filename.


2002/04/25 - STanda
- The fvdicout.app added to atari/fvdi/utility. This is the Johan'si
  bconout.gtp replacement. It is built using the FreeMiNT CVS tree
  and with heavy utilization of the TosWin2 vt52 emulation sources.
  It needed only a slide changes in TosWin2 sources. This should not
  be the final solution. The real one would by to implement the vt52
  emulation into the fVDI engine itself which is on the TODO list in
  the fVDI remainings. 
  Using this I don't have problems here with TOS applications here.
  It needs to be started after the VDI initialization (e.g. from the
  desktop). There might be some code to initialize the VDI later in it.
- AraEther made compilable. nearly no code check or test done.

 
2002/04/21 - milan
- header files reform
- distributed dispatcher rewroted
- JIT compiler integrated


** Version 0.1.7

2002/04/21 - milan
- pre-support of FreeBSD


2002/04/21 - joy
- ExtFs: Dpathconf(DP_XATTR) disabled altogether. It was causing problems
  in Thing (Thing didn't refresh source window of 'move' operation).
- $7135 illegal insn (debug print) was not printing until LF was sent.
  fflush added.
- SDL GUI, taken from hatari. Not working yet, but soon will be.
- atari sound driver (from Didier) included in atari/sound CVS folder.
- EmuTOS loading: now checked for proper file length.


2002/04/20 - joy
- audio.cpp - wrong memset() addr fixed. No more crashes, sound works
  like a charm.

2002/04/20 - STanda
- PurePascal and its debugger snapshot added.
- ExtFs: Small general code cleanup


2002/04/19 - Didier MEQUIGNON & joy
- audio driver: Atari side uses ZMAGXSND.PRG, a slightly modified
  MagiCMac sound driver. The communication is based on illegal instruction
  $712c and IRQ 5 used as a callback from host to Atari. Aniplayer is
  supposed to play sound nicely but so far it's crashing on me (joy).

2002/04/19 - STanda & joy
- ExtFs: JOY have discovered that ExtFs:Fxattr should probably _not_
  take the DTA structure. This bug was originating in the Julian
  Reschke's cookfs01 driver sources that I started to program from
  (he uses DTA in the Fxattr signature, although he never uses this
  argument - most probably cut&paste bug).
  Now the Fxattr works properly which means:

  * The Dpathconf() DP_XATTR return value works also good for Thing
    to refresh the destination window. The access time and originating
    time was masked out here to let it work for more hostfs filesystem
    types properly. It is subject to change. The hostfs mounted to the
    particular hostfs path is to be investigated whether it supports
    the features and the flags should be set appropriately.
  * QED save and load problems fixed.

  Here it seems that the most ExtFs MetaDOS problems on Linux host
  OS are gone. Please test heavily. Thanks goes to JOY and his hackers
  history! ;)

- ExtFs namespace method/function recognition doesn't work under
  FreeMiNT because mintbind.h are only macros..... The names were changed 
  to have the ExtFs suffix.


2002/04/18 - STanda
- ExtFs bug in Fsnext fixed. If the path for Fsfirst doesn't contain
  wildcards then many applications don't call the Fsnext. We need an
  array of paths for mutiple Fsfirst/Fsnext called with a different
  DTA buffer pointer. We also need to free the paths if they are not
  used any more (Fsnext with -49 or Fsfirst without wildcards and 0).
  If the path was freed from the array then we return -49 from Fsnext
  now.
  This fix causes LZHSHELL.APP be able to extract an archive to the
  MetaDOS driven filesystem.
- The Patrice's patch adjusted to be only namespace distiguished
  calls. No _emu suffix. Needs to be tried to compile under FreeMiNT.


2002/04/13 - joy
- AranymFS: we can't rely on error codes returned by hostfs functions.
  For example TOS Fcreate() returns -34 if the path to file does not exist.
  The fix I put there helps ST-Zip to unpack folders onto host fs.

- AranymFS: Dpathconf(DP_XATTR) disabled (because I didn't know the correct
  parameter). Suddenly Thing is able to refresh the destination window
  correctly.

- new experimental spec file for building RPM package.

- new TOS patch for redirecting printer Xconout vector to host console

- new function "Reboot" that does hard restart of the machine.


** Version 0.1.6

2002/04/12 - joy
- newcpu.cpp: NMI will break out of the STOP jail. From user point
  of view - if EmuTOS happens to crash you'll be able to quit ARAnyM
  now.

- newcpu.cpp: STOPped CPU did not generate 200 Hz system interrupt
  when compiled with --disable-sdltimer. Fixed.


** Version 0.1.5

2002/04/10 - joy
- fixed bug in Reset insn emulation that caused EmuTOS crash

- uae_cpu/spcflags.h cleaned up. NMI flag introduced.
  I also added the MFP|VBL|NMI into periodic flags check (wondering
  how it could work before).

- clean Quit implemented. No more killed SDL or X threads. Using NMI
  like on real machine :-)


2002/04/10 - milan
- IDE: synced with Bochs CVS (concat_image_t(), not used in ARAnyM now, but
       who knows)
- CPU: instr. Reset calls now AtariReset()
       cleaning in JIT integration
       synced with BasiliskII CVS (DOTRACE x STOP)


** Version 0.1.4

2002/04/09 - joy
- fixed my own stupid bug in acsifdc.cpp that broke floppy support.
  Thanks Martin for reporting it.


2002/04/04 - STanda
- MetaDOS Fopen implementation shoudn't be able to open a directory.
  Fixed due to the Olivier Landemarre <Olivier.Landemarre@utbm.fr>
  and the CharView author who provided a source of the application
  that had this problem. The EasyGEM library tries to open directory
  entries using Fopen. Thanks for EasyGEM beeing open-source.

- Newly created files specified with all letters in upper case will
  be automatically converted to lowercase ones. This follows a small
  limitation that there is no way to create e.g. PC.PRG on halfsensitive
  fs (it will be pc.prg... but the Pc.prg and any other combination
  would work). This can be made optional.

- m68k part of the MetaDOS driver was pretty printed and converted
  to correct (DOS mode newlines). No need to update the binary here.

- PureC (PC.PRG) patch to let it working on MetaDOS driven filesystem
  (src/atari/tools/pcpatch.*).


2002/04/03 - milan
- sync with BailiskII-JIT (25.3.2002)


2002/04/02 - Patrice Mandin & milan
- pre-patched for Atari MiNT :-)


2002/04/02 - joy
- MFP and ACIA/FDC/ATA updated to be ready for major MFP rewrite.


** Version 0.1.3 - don't forget to update your Atari fVDI driver

2002/03/27 - STanda
- extfs.cpp/transformFileName rewritten nearly from scratch. Now it should be
  more readable source than before.
  A simple findFirst function fix: no error on the stat() failure. E.g.
  an invalid symbolic link on the host fs.
- fVDI driver: floating Videoram bug fixed.


2002/03/26 - milan
- MMU returns logical address during bus error
- IEEE FPU is default only for i386


2002/03/26 - joy
- transformFileName in extfs.cpp fixed three times. ARAnyM will not crash
  when it encounters a long filename. ST-Zip will not crash when browsing
  MetaDOS drive. Maybe that PureC works now as well?


2002/03/22 - joy
- IEEE FPU emulation fixed: 68040 specific insn (like FSMOVE) don't throw
  illegal opcode exception anymore.
- IEEE FPU is now the default FPU emulation in configure phase.


2002/03/21 - milan & joy
- forgot to set the faulty address when invoking BUS ERROR from hardware
  registers access.
- Exception 2 panicbug displays the faulty address now.
- wrong bus error stack frame format 7 fixed.


2002/03/20 - joy
- MFP and RTC tweaking to get Linux-m68k running


2002/03/15 - milan
- Exception() is called only from main loop, not from trans. function.


2002/03/14 - Olivier Landemarre <Olivier.Landemarre@utbm.fr> & STanda
- ExtFs: ugly bug in flags2st fixed. This might affect some problems
  we had with the MetaDOS driver, but unfortunatelly PureC still refuses
  to compile a project.
  Preprocessor flag to use creat() instead of open() in Fcreate
  implementation... no improvement here though (just suggestion from Olivier).


2002/03/12 - milan
- Irix among supported platforms


2002/03/11 - milan
- MMU is back, based on Wez Furlong's patch (UAE)


2002/03/06 - STanda
- ExtFs: xfs_getname implemented. The Pure C now finds the project file, but
  it crashes on assembler compilation.
  The ExtFs::cookie2Pathname() now uses getHostFileName to be able to work
  case insensitively.


2002/03/05 - milan
- memptr for addressing in Atari memory out of uae_cpu
- sync with Bochs CVS 2002/03/02 11:31:18 GMT
  o ReadCDSector() (for win32 ASPI) returns 1 if target status is okay
  o win32 ASPI version of insert_cdrom() checks media status using
    ReadCDSector()
- gencpu.c patched for MMU (based on Wez Furlong's MMU patch 0.8.20.2 for UAE)


2002/03/03 - Gwenole Beauchesne & milan
- fpu_x86 debug mode corrected


2002/02/28 - milan
- get_i*_1 moved to newcpu.cpp
- probably last sync with aranym2 (unofficial CVS) before MMU and pre-JIT
  support (new gencpu.c and subdirectory compiler)


2002/02/27 - milan
- corrections of types in hostscreen.h and memory.h (using uintptr instead of
  uae_u32 with Host addressing)


2002/02/26 - milan
- Native Feature instruction framework added
- address validation in CPU interface
- exceptions.h removed, interface moved to CPU interface, include file in
  sysdeps.h
- error handling of CD-ROM eject on Linux


2002/02/25 - milan
- fp_extended, fp_single, fp_double -> fpu_extended, fpu_single, fpu_double
- spcflags handling rewritten
- original PC handling, must be converted to ARAnyM's after stabilisation
  (slower)
- exception stack handling is for 68040 now
- table68k based on JIT BasiliskII
- EmulOp (0x71XX) is handled as usual instruction


2002/02/25 - joy
- web updated (Ctirad wrote new About)
- simplified most of the presentation.xlst but it's still not good enough.
- limited the text size to 600 pixels for more pleasant reading on wide screens


2002/02/23 - joy
- separated input related code from main.cpp into input.cpp
- all open() functions have "O_BINARY" flag appended so that Cygwin
  binaries won't mess CRLF in files (cdrom.cpp, extfs.cpp, fdc.cpp)


** Version 0.0.22 so you can see new IDE code is there.

2002/02/21 - milan & joy
- cdrom.cpp sync with Bochs (CD-ROM eject supported)
- ata.cpp sync with Bochs (32-bit data access supported)
- CD-ROM eject in Linux added
- hardware.cpp + ide.cpp updated for 32-bit IDE data access.
  It did not work so it is disabled in ide.cpp for now.


2002/02/20 - joy
- config file is created with proper default values
- IDE devices are disabled by default
- CONFGUI obsolete #ifdef stuff removed from parameters.cpp


2002/02/20 - milan
- new FPU (based on JIT BasiliskII)


2002/02/19 - milan
- src/ <-> CPU interaction cleaned
- memory access cleaned


2002/02/18 - milan
- floating VideoRAM


2002/02/18 - Olivier Landemarre <Olivier.Landemarre@utbm.fr> & STanda
- Compilation problem under Cygwin fixed. In extfs.c for Cygwin
  MFSNAMELEN is undefined should replace by buf.f_namelen. The condition
  was added due to the BSD systems so I've changed it to if OS_*bsd then...


** ARAnyM 0.0.21 released

2002/02/12 - joy
- IDE emulation adapted for Falcon: $f00039 is recognized but ignored.


2002/02/12 - milan & Thomas Huth
- ARAnyM support only 68040 only. Other CPUs aren't generated


2002/02/11 - milan
- synced with Bochs IDE
- new version of CPU interface


2002/02/01 - Frank Naumann & joy & milan
- PAGE_MASK renamed on ARAM_PAGE_MASK (ARAnym Memory PAGE_MASK), PAGE_MASK is
  defined in /usr/include/machine/param.h on OpenBSD
- PAGE_CHECK renamed on ARAM_PAGE_CHECK
- ndebug doesn't use ioctl() now for any switching tty's setting
- support for statfs on [Net|Open]BSD


2002/02/01 - joy
- fixed long-standing bug in ATA.cpp that made ARAnyM stuck when no IDE disk
  drive was found (or defined in config).


2002/02/01 - milan
- the 1st step of rewriting CPU/Memory <-> HW interface, look at
  cpu_emulation.h


2002/02/01 - STanda
- MiNT aranym.xfs added. This is the preliminary version working with HostOS
  root in u:\nativefs just like stonx.xfs does. The mapping to other folders
  is possible and is going to be done later.
  There are several unimplemented functions there, but the basic functionality
  is implemented.
  The m68k part is available only as a binary in src/atari/aranymfs.
  The sources were grabbed from the STonX directly and hacked just to work and
  needs cleaning.
  The whole ExtFs should be rearchitectured. It was designed for MetaDOS and
  now it is getting very, very unclean. Better not to look into the code.
  I will rewrite this nearly from scratch during the planed shift to a portable
  library.
  CAUTION: There might be crude bugs in it, so please test it on some not very
  essential files on the mounted host filesystem.


2002/01/30 - joy
- emul_op.cpp: OP_DEBUGUTIL made more secure (wrong addr will not crash aranym)


2002/01/29 - joy
- two EmuTOS screenshots added
- unsupported Windows binary available in download section


** ARAnyM 0.0.20 released

2002/01/28 - joy
- tools/clocky.prg.bz2 updated - the hotkey combo is back at LShift+RShift
  (the Alt+LShift collided with Thing).
- updated aranymrc.example
- updated most documentation and web pages


2002/01/27 - joy
- XHDI dispatch added to emul_op
- XHGetCapacity() implemented
- DMAread() improved


2002/01/26 - STanda
- extfs.[ch]* cleanup from non needed arguments


2002/01/24 - Olivier & joy
- on Windows the host operations (fVDI, aranymfs) block the timer thread
  so we have to call the invoke200HzInterrupt() manually as soon as the
  host operations finish.
- download.html offers nightly snapshots now.


2002/01/18 - milan
- FixedSizeFastRAM fixed
- no debugger fixed
- install part of Makefile fixed


2002/01/17 - milan
- cleaning in ./src - memory access etc.


2002/01/15 - joy
- you can undefine USE_GETTICKS in main.cpp to replace SDL_GetTicks()
  with gettimeofday(). This might help on platforms where SDL_GetTicks()
  is slowed down by aranymfs or fVDI driver.


2002/01/13 - STanda
- fVDI driver patches for expandArea in 24 and 32bit depth.
  Also the 1, 2, 4 bit depth modes were made available.
  There are still bugs in the expandArea Mem->Mem. Also blits are word
  aligned when they shoud not be.


2002/01/13 - joy
- DMAread() added to emul_op interface (used in current EmuTOS)
- faq.xml updated by Ctirad
- configure.in: SDLTIMER and PAGE_CHECK are enabled by default.


2002/01/11 - Olivier Landemarre & joy
- fixed bug in time sync (signed long is bad for GetTicks())
- fixed bug in TimerC disabling (wrong bit mask for &)


2002/01/10 - Rodolphe Pineau & milan
- vm_acquire_fixed corrected, configure script also


2002/01/09 - Rodolphe Pineau & milan
- 1st step for SGI/Irix
- aranymfs more portable (Solaris supported now also)
- corrections in configure script, memory allocation, memory access


2002/01/08 - STanda
- The aranymfs config file setting finished (thanks to JOY)
- fVDI driver doesn't destroy palette setting on resolution change
  The SDL_SetVideoMode clears the palette setting -> the palette is stored
  and restored after change (hostscreen.cpp/setWindowSize()) 
- the driver has also correct 8bit inverse color handling.
- up and running


2002/01/08 - joy
- the config file format and location has changed (now at $HOME/.aranym/config)
- most global config variables moved to bx_options struct
- NVRAM (formerly CMOS) file is stored in the aranym config folder as well now.
- fixed many bugs in the parameters.cpp code. It should be quite usable now.


2002/01/07 - joy [ ARANYM_0_0_17 tag ]
- NVRAM RTC getting current year fixed.


2002/01/07 - Patrice Mandin <pmandin@caramail.com> & STanda
- Patrice: I did a simple patch for the vdi color mapping.
  The following ugly piece of code removed.
  #ifdef __PUREC__
     short vdi2pix[1];            /* Of course really 256... */
  #else
     short vdi2pix[0];            /* Of course really 256... */
  #endif


2002/01/05 - joy
- floppy geometry detection fixed. It could never work before!


2002/01/03 - joy
- Blitter now calls Do_Blit() on reading status register only. Doesn't seem
  to fix the errors during Bconout, though.
- Xconout redirected to host console using poor VT52 emulation.


2002/01/03 - STanda
- fVDI driver: the resolution is changed during the virtual workstation
  creation. Copyright notes updated (synchronized with Johan's).


2001/12/30 - joy
- Johan increased PAGE of PAGE_CHECK to 1MB (for nonMMU mode). This greatly
  improved the performance - 36k5 dhry on my machine now. For the MMU040
  the PAGE is 4kB.


2001/12/29 - joy (tagged as ARANYM_0_0_16)
- Johan Klockars' PAGE_CHECK (dividing address space into 4k blocks) added.
  It produces slightly better dhrystones than 0.0.14 (34k2 vs 33k5) but
  real-life gcc benchmark didn't show any speed up. Perhaps this is a great
  idea for the MMU040 implementation but without MMU040 it doesn't help much.
- parameters.cpp and main.cpp cleaned up a bit.


2001/12/27 - joy (tagged as ARANYM_0_0_15)
- FastRAM can be fixed size ("./configure --enable-fastram=X") - that makes the
  check_ram_boundary() even faster (comparing with constant instead of fetching
  the value of a global variable). 35k2 dhry now (this is probably the fastest
  possible solution before splitting the RAM into 4k blocks as Johan suggested.
- TOS 4.04 patched to enable FastRAM check.
- fullmmu is disabled by default now.


2001/12/26 - joy (tagged as ARANYM_0_0_14)
- handling of MFP interrupts moved from CPU to MFP module
- checking for VBL and MFP joined in one 'if' - another nice speedup (33k5 now)


2001/12/25 - joy (tagged as ARANYM_0_0_13)
- ACIA IRQs are not buffered (like TimerC IRQs are) - it was causing bad
  keyboard&mouse lockups. Apparently TOS can read several scancodes from IKBD
  in one IRQ and our poor implementation fits that feature :-)
- TimerC interrupt fired only if enabled in MFP IRQ enable reg.


2001/12/22 - joy (tagged as ARANYM_0_0_12)
- most video related parameters moved to bx_options.video struct
- added "--refresh <x>" cmdline option. Default value is 2 = 50/2 Hz screen
  refresh. Allowed values are 1 - 200 (50Hz - 1/4 Hz)
- check_ram_boundary() allows direct access to physical videoram
- check_ram_boundary() now makes FastRAM equally fast as ST-RAM (30k5)


2001/12/21 - STanda
- RH gcc 2.96.98 preprocessor bug workaround: The remarks in multiline macros
  are before the linetrailing backslash.


2001/12/20 - joy
- cleaned up newcpu.cpp do_specialties()
- STOP instruction handling really works and gives CPU time slices back
  to host OS!


2001/12/19 - joy
- check_ram_boundary() cleaner now - no default value for 'write' parameter
  and the 'size' parameter contains the natural value - 1 for byte access,
  2 for a word access and 4 for a long (doubleword) access.
- you can define NO_MEMORY_CHECK in memory.h to see the original
  speed of old unsafe, often crashing ARAnyM (Dhry: 27k -> 31k)


2001/12/17 - joy
- SDL Timers are back! --enable-sdltimer
- VBL timer runs at precise 50 Hz now
- VIDEL screen refresh at fixed 25 Hz now


2001/12/16 - joy
- check_ram_boundary() takes an additional parameter that sets the size 
  of memory access. Now finally all memory accesses are checked and nothing
  can escape from ARAnyM allocated memory.

- acceleration for blitter configurable: --enable-blitmemmove turns the
  memmove acceleration on and --enable-blitsdlblit allows the SDL_blitsurface
  to be used.

- check memory by array experimental code removed altogether. It was not
  faster unfortunately and it didn't allow the size check that has just been
  added to check_ram_boundary.


2001/12/11 - STanda
- fVDI driver patch to not disable the DEBUG. There was the debug.h included
  from another .h file which wasn't correct. Some Johan's methods were moved
  to the .cpp file.

- framebuffer driver detection to force the fullscreen mode and therefore
  no mouse pointer redraw problems when using Clocky(TM). The mouse cursor
  was trying to leave the window (actualy the screen surface in fb, which
  was causing troubles)

- The SDL_WarpMouse is now called after the HWInit() (actualy SDL_SetVideoMode)
  where doesn't cause floating point exceptions and aranym crashes in fbcon.
 

2001/12/07 - joy
- first two long words (addresses 0..7) are readonly now like on real Atari.
  Thanks to Patrice for forcing us to fix it :-)


** ARAnyM 0.0.11 released

2001/12/05 - joy
- "-N" or "--nomouse" added to cmdline options. It basically disables
  the auto mouse grabbing at startup. Suitable especially for debugging.

- one more illegal/emul_op instruction enabled: 0x7135 can be used for
  debug prints - especially for EmuTOS debugging.

- CMOS/NVRAM now starts with English/UK/USA keyboard layout. Thus you get the
  right keys even without Clocky on most regular PC keyboards.


2001/12/05 - milan
- "initialization" of 0-7 moved to reset routine, more secure solution

- patched ins. BFINS (uae 0.8.19)

- sync with my "Pragues versions"

- buffer in newm68k_disasm cleared after every ShowEA/fprintf, disasm in
  ndebug corrected


2001/12/03 - Olivier Landemarre <Olivier.Landemarre@utbm.fr> & STanda
- ExtFs: Frename fix.


2001/12/02 - joy
- keyboard conversion code rewritten again. As the SDL returns different
  scancodes for same keys under different OSes I created a heuristic
  analysis of pressed keys that tries to detect the offset between the
  SDL scancode and the physical one. Tested under framebuffer and X11 on Linux.


2001/11/30 - Johan Klockars <rand@cd.chalmers.se> && STanda
- fVDI: improved and made fit into fVDI CVS repository directory structure.
  General speedup of line and polygon drawing. 
  New copy of m68k part sources. Since now you should use the aranym.sys.bz2
  m68k binary along with current aranym CVS sources.
  The old m68k part source will be removed later.


2001/11/28 - joy
- new keyboard conversion code: now based on pure scancodes. Clocky for Aranym
  now distributed with English PC101 keyboard. With Clocky loaded you have real
  WYSIWYG. Feel free to submit other .KBD files for Clocky (French, German,..?)

2001/11/25 - joy
- new FastRAM.PRG with automatic size detection and _FRB buffer.

2001/11/21 - milan
- cleanning in includes


2001/11/21 - Olivier Landemarre & milan
- problems with new Cygwin corrected

- FullScreen tag in ARANYMRC


2001/11/20 - milan
- small correction in ATCs (MMU), not enough, grr


2001/11/20 - Francois LE COAT & milan
- better support for Solaris


2001/11/20 - Olivier Landemarre & milan
- the 2nd step for Cygwin


2001/11/19 - joy
- MD5 should be OK on big endian machines (Sparc)

- new TOS 4.04 patches - cleaned up a lot thanks to the disassembly made by
  Patrice. Nemesis init routines removed. Reboot code not moved to $600.
  Movem patch removed. The whole additional code moved behind the TOS end
  so French and other RSCs are OK now.
  You are encouraged to drop the previously patched TOS versions and to use
  just plain original TOS 4.04.

- parallel port emulation added. This is the lowelevel stuff - Yamaha and MFP
  are mapped to IBM EPP parallel port. Several things are hardcoded and
  the whole stuff is disabled by default for now. But when I tested it PARCP
  ran quite well!


2001/11/02 - STanda
- fVDI: The driver handles some bitplane functionality. It works somehow, but
  it still has many bug in this mode. The color palette is correct only if
  booted in the same color depth.


2001/11/14 - joy
- corrected XML->HTML compilation

- made the IDE f00039 alternate status register same as the main IDE status reg.


2001/11/13 - milan
- web/Makefile corrected

- saxon.jar not in CVS now (downloaded with wget from ftp.sophics.cz/pub/aranym/tools)

- gemram removed from Makefile.in


2001/11/13 - Olivier Landemarre & milan
- support for Cygwin


2001/11/11 - joy
- during configure you can "--enable-directcolor" which is the infamous TOS
  and Aranym patch for direct truecolor with VIDEL. I made it configurable
  in compile time to simplify the memory boundary checks in uae-cpu/memory.h.
  The default is no direct truecolor (it's a hack, after all).

- during configure you can "--enable-boundaryarray" which is a different
  method for checking the memory boundaries. It's based on an array of bool
  flags - each bool represents 1 MB of memory. There are separate tables
  for reading and writting because you can't write to the ROM area.
  Advantages:
    o FastRAM is finally no slower than ST-RAM
    o ST-RAM and FastRAM size can be configured in runtime very easily
    o you can even simulate memory windows (FastRAM SIMM banks, e.g.)
    o regular memory access gets a higher priority over HW reg access
    o the code might be faster than the original 5 comparisons
  Disadvantages:
    o the whole megabyte of ROM area is readable (so including 0xe8-0xefffff)
    o the code might be slower than the original due to indexing in 4 kB array

- a change in IKBD emulation that fixes the problem with slow mouse motion
  in Videlity Config prg.


2001/11/07 - milan
- new correction in mmu_decode_addr, I suppose still not enough


2001/11/06 - milan
- corrections of PFLUSH, PTEST (I found my old corrections on hd, grr, 2 months
  old, grr)

- MMU address decoding works now (after set_mmu Desktop runs, sometimes),
  but still MiNT (and not only MiNT) gives Bus error/illegal instruction, I
  know about one bug, I'll correct it later.

- mmusetup.cnf example added to reposity

- make install and Debian package corrected

- the 1st step for Solaris


2001/11/06 - joy
- TOS was patched with WinX by a mistake. Fixed. GEMRAM 1.0 from Aratools
  does not work correctly as the ROM area is not writeable. Use real GEMRAM
  instead.


2001/11/05 - STanda
- VIDEL: Since now we are using 8bit SDL surface for all VIDEL depths
  less than 16. The blitting routines were optimalized (the destBPP checks are
  done outside the main blit loop). The #define SUPPORT_MULTIPLEDESTBPP enabled
  to let support VIDEL definitely 8, 16, 24 and 32 bit destination depths.


2001/11/02 - STanda
- fVDI: The driver now normally initializes to 16bit when no mode option
  is provided in the fvdi.sys. The screen size remains the same as before
  fvdi.prg initialization then.


2001/11/01 - joy
- mouse behaviour much improved. Automatic grab is configurable now. You can
  ungrab the mouse by Alt+Ctrl+Esc and grab it back by left mouse click.

- new command line option "--save" will save the config file with actual
  values.


2001/11/01 - STanda
- fVDI: The 16,24 and 32bit modes works now.


2001/10/31 - STanda
- fVDI: The resolution change works now with the current driver. Do not try
  to compile the m68k part, it's just full of hacks, but it works for me.
  Just use the binary from CVS. The only useable is the 16bpp in any resolution
  in X11. I didn't try it in framebuffer or so.


2001/10/30 - STanda
- The HostScreen support for 8,16,24 and 32 BPP finished. Many optimalizations
  done in getting the switches out from loops. There should be some speedup, but
  this I can't see on my computer and I didn't even try to make any benchmarks.


2001/10/29 - joy
- --floppy <path> added to the command line options

- --rom <path> removed

- EmuTOS=<path> in the config file. EmuTOS gets a higher priority over the TOS.

- updated aranymrc.example


2001/10/29 - milan
- ARAnyM can be used now without support of debugger (--enable-debug=no)

- ndebug can be activated now also if you send SIGINT to ARAnyM (and that's
  why it cannot cooperate with cxmon)

- ndebug is now default debugger

- support for gmake

- --config FILE command line option added

- the command line options are scanned for version/help/config before
  parsing of a configuration file


2001/10/26 - milan
- support for instruction history now also in ndebug

- small change in m68k_run_1


2001/10/25 - joy
- when the aranym catches segmentation fault it releases mouse and keyboard
  and shows last 20 instructions prior the segfaulting instruction (only
  if compiled with --enable-fullhistory).

- InitROM() asks for 512 kB long file (on the net there are just 256 kB ROM
  images).

- Floppy stuff moved to fdc. Automatic mounting - first read/write with
  fallback to read only. Media Change trick prepared but disabled for now
  because the floppy does not read past 499 sector (try e.g. Diskus Read Test).
  Dunno what's wrong. Wonder if the floppy ever worked correctly?


2001/10/24 - STanda
- fVDI: Essential bugfixes added. Now the driver works properly except for the
  bugs in the fVDI engine. These are discussed with the fVDI author.
  The lines with a negative y coordinate are drawn properly now.


2001/10/23 - STanda
- Screenshot added to the website.
- fVDI: Mouse Is not hidden at the right and bottom screen edge.
  Is colorized properly. The shape's hotspot shift implemented.
  Shouldn't crash on higher resolutions than 640x400.
  Put pixel fixed to take the pattern in mind.
  The lineClipping fixed. The lines that starts and ends out of the screen
  are not drawn due to the fVDI.PRG beta engine.. the beta crashes sometimes too)
  The v0.95 works quite well, but with display bugs like no pictures in
  ST-Guide, wrong colors of Thing's keyboard cursor.
- the hardcoded screen resolution changed to the hostScreens one
  in mouseOut handling.


2001/10/19 - STanda
- fVDI: The driver updated to work with FVDI.PRG beta. This beta enables
        e.g. the monochrome images in ST-Guide and fixes many bugs.
        There is still a bug in new line clipping, but I just don't have
        time to fix it now. I know exactly what is the problem.


2001/10/18 - joy
- MD5 class added
- InitROM() detects both our ABTOS and the original TOS 4.04.
- InitROM() patches TOS 4.04


2001/10/17 - STanda
- README The sophics.cz replaced by atari.org for http access. The ftp
         and email addresses was left. (I don't know wheter aranym@atari.org
         works and the ftp must stay @sophics, the absolute path problems)
- ExtFs: Small bug fix. The Fsfirst&next returns the . and .. dirs too.
         (according to Julian Reschke's advice)
- Tools: The changes that were made and uploaded to JOY's ftp are in CVS now
         The README was modified a bit.


2001/10/16 - STanda
- fVDI:  The segfault bug in gfxLineColor removed.
- VIDEL: The 16, 24 and 32 destBpp are supported when #define SUPPORT_MULTIPLEDESTBPP
         in videl.cpp (the SDL surface depth setting is in hostscreen.cpp).


2001/10/16 - milan
- support for BasiliskII's monitor cxmon
- aranymrc now supports FastRAM's size.


2001/10/16 - STanda
- fVDI: The driver should be working now in TC (I finally got the Thing
        executed and looking correctly)


2001/10/09 - milan
- some changes in memory allocation, now support for malloc on dummy platforms


2001/10/08 - STanda
- fVDI: the blitting works on destination 16bpp (still no shadow buffer used).


2001/10/08 - STanda
- ALT+PrintScreen generates a snapshot file using the SDL_SaveBMP.

- Host OS dependent objects moved to the host.cpp(h) and aranym specific
  objects like ExtFs and FVDIDrv moved to araobjs.cpp(h)

- general cleanup of unused variables (fdc.cpp)

- the WEB pages updated


2001/10/02 - milan
- the first "public" version of "ndebug", some modes still disabled

- platform's independent memory allocation, if ARAnyM doesn't know better


2001/10/02 - joy
- ROM file reading back in main.cpp
- TTRAM renamed to FastRAM everywhere
- --ttram renamed to --fastram, -T renamed to -F
- --grab_mouse switch removed
- added 'cookie_MCH' config option, it holds hex long value
- maxInnerCounter in main.cpp should be tuned to your CPU speed.
  The lower your CPU is the lower the value should be.


2001/10/02 - STanda
- fVDI: blitArea screen2screen & mem2screen (TC) works now.

- fVDI, VIDEL: bitplane to chunky conversion is move into the HostScreen
  inline - should cause no performace penalty

2001/10/01 - STanda

- fVDI: drawLine supports the logical operations now.


2001/09/25 - milan
- cleaning of memory allocation


2001/09/21 [ARAnyM 0.0.8] - joy
- in a fVDI session (when VIDEL rendering is disabled) if VIDEL VideoRAM address
  is changed the VIDEL rendering is enabled again. This is essential for example
  when you reset the Atari machine (you want to see the Fuji logo, don't you? :)

- MFP TimerC emulation simplified - no more double TimerC interrupts as we
  are now calling the invoke200HzInterrupt each 5 milliseconds.

- hardware.cpp helper functions removed. Now modules call their public functions
  directly. It's better readable and faster this way, I think.


2001/09/20 - STanda
- fVDI: Off by one bug fixed in fillArea.

- fVDI: Separate functions for transparent and opaque background. gfxPrimitives
  methods moved to the HostScreen. Several methods made inline.
  fVDI driver Shouldn't cause BUS ERROR now.


2001/09/20 - joy
- fixed very annoying bug in direct_tc mode (no more segfaults at $e08ba8 I hope!)

- mouse code for host-client transformation is now conditional (only when not running
  in fullscreen).


2001/09/20 - STanda
- The fVDI driver update: colors work correctly, expandArea implemented
  to display icons and texts, putPixel speedup. Now it seems pretty fast
  when DEBUG is 0 ;)

- gfxprimitives cleanup


2001/09/19 - joy
- TT-RAM (or FastRAM) size entered on command line (--ttram) is in MB now.
- new .aranymrc option named "FastRAM", acts as the --tram switch.
- first release of aratools.tgz, available at ftp.sophics.cz/pub/aranym.
  FastRAM (or TT-RAM?) can be anything from 0 to about 112 MB (then it
  crashes, I suspect it's due to the weird Milan's virtual memory management).


2001/09/18 - joy
- keys remapped: Atari Help is on the F11 host key, Atari Undo is on F12 key.
  Keys PageUp/PageDown are mapped to Atari combo Shift+ArrowUp/Down which
  should work in most GEM programs (handy stuff, you get used to it fairly
  quickly).

- mouse behavior changed: first, it's grabbed automatically and centered
  on standard screen size (640x480). Second, with special tool support
  (right now modified Clocky - you find it in ftp.sophics.cz/pub/aranym)
  you are able to move the mouse out of the Atari aranym window. Works
  just like in vmware. Pity it has hardcoded GEM screen size right now.
  Needs to be fixed - made more flexible.

- ARADATA I/O registers are ready to support arbitrary FastRAM size and
  automatic StandaFS config.sys updating, I just need to write the tools
  for that.


2001/09/11 [ARAnyM 0.0.7] - joy
- real hard fight with Aniplayer. I found that it checks whether there's
  a $CAFEFADE number at $F4000014. This check was killing aranym since
  my check_ram_boundary() was broken (due to a number of stupid bugs).
  Anyway, this CAFEFADE signals that there can be a hardware located at
  that address already (it is flash ROM of Centurbo2 according to Didier)
  and that is a bad sign for us since we wanted to have the host videoram there.


2001/09/10 [ARAnyM 0.0.6] - joy
- proper check_ram_boundary in memory.h. Has to be always enabled, otherwise
  programs like e.g. Aniplayer can kill the whole aranym..
  FastRAM works again (still fixed to 32 MB).

- SDL_Timer is not used anymore. CPU now checks once in a while (currently
  each 100 m68k instructions) whether it's time to emulate an interrupt.
  The original behavior with timers may be enabled with -DUSE_TIMERS.


2001/09/09 - joy
- direct TrueColor works again
- clicking in fullscreen X11 works again (generally mouse grabbing works again)
- disabled the shit in main_unix.cpp (the memory management)
- fixed a few little bugs


2001/09/04 - joy
- milan's port of ata.cpp and cdrom.cpp from Bochs v1.2 now enables direct
  access to CD-ROM! Use "IsCDROM = Yes" in your [IDE1] section of aranym
  conf file.


2001/09/01 - milan
- switch for enabling full opcode's history for debugger


2001/08/31 - milan
- other small corrections for MMU

- memory access now a bit quicker


2001/08/29 - milan
- stupid buggy preversion of TV conf. GUI aranymrc, needs to rewrite in
  better form, something as powertweak's text mode conf. Output in
  aranymtest.rc file. Also needed to find problem with size of strings
  (buffer overflow).

- directive DebugOnStart from ARANYMRC changed to Bool_Tag

- patched stupid mistake by entry of debugger (Alt x Alt+Pause)

- some small corrections for MMU

- newm68k_disasm hasn't any problem with memory addressing now
  (set/longjmp problem)


2001/08/29 - STanda

- VIDEL got the doRender flag with setter setRendering().
  The host_colors_uptodate variable name was changed to hostColorsSync.

- HostScreen got the doUpdate flag cleared upon initialization if the HWSURFACE
  was created.

- fVDIDriver got first version of drawLine and fillArea (thanks to SDL_gfxPrimitives).


2001/08/20 - milan

- support for autodetection of a real disk's geometry in Linux, also for
  createdisk.sh's disks, but new version of parameters.cpp needs reorganization
  in IDEx part

- patched ins. SBCD, ABCD, NBCD (uae 0.8.17), BDcc, Scc in table68k patched

- UAE FPU as default FPU (now better than i386 opt!)

- devdist in Makefile


2001/08/16 - Joy

- config file taken from PARCP. Feel free to extend the global_conf struct in parameters.cpp
  with more options.


2001/08/15 - STanda

- the videl.cpp ST compatible color palette handling added (thanks to Ctirad)


2001/08/13 - milan

- bindist in Makefile

- aranymrc example

- IDE x's settings from aranymrc file


2001/08/10 - milan
- real addressing now working correct

- the first step for reintegration of BasiliskII's CPU API

- Makefile depends repaired

- new sync with BasiliskII (CVS 24.7.2001)

- memory allocation back in main_unix.cpp - better for portability of real
  addressing, also ROM reading back there, not only POSIX, we have also
  non-POSIX OS's


2001/08/09 - joy

- added ata-new.cpp and cdrom.cpp from Bochs. Compilable but don't work yet (dunno why).


2001/08/08 - STanda

- no atexit crash ( atexit(ExitAll) called )

- numblock key mapping fixed. (/,*,-,+ keys fixed)

- bitplane to chunky conversion speedup (enrolling the conversion loop etc.)


2001/07/24 - joy
- portable stuff moved from Unix folder up to the main.cpp (should be cleaned up)

- bx_options moved from ata.cpp to parameters and should become global structure
  for aranym options

- floppy is not inserted automatically upon start - this is because my machine does not
  have a floppy connected and it caused aranym to hang. Should be a command line parameter
  like -floppy or something.


2001/07/20 - milan
- signals & pthread removed, now only SDL needs pthread

- mmu_op patched, setjmp/longjmp only, no exceptions

- some warnings "killed"

- "ndebug" integrated (only dbprintf), now D(bug()) without \n


2001/07/13 - STanda
- BLITTER function table restored. (the only - bad - thing is that all
  BLITTER member data must be public to be able to work like this)

- direct_truecolor mode made working again (was not probably since the
  HostScreen creation)

- note: the original fVDI driver sources compiled as they are and got
  corrupted (parachute) one. fVDI author notified and requested the
  whole source tree again.


2001/07/09 - STanda
- SDL comunity solved our mouse problem in Xs! Get the newest SDL cvs,
  make & install

- the grab_mouse is set by default when in fullscreen


2001/07/02 - milan
- new UAE CPU port from BasiliskII (CVS 25.6.2001)

- more portable


2001/06/18 - STanda - version increased to 0.0.5
- the SDL dependent parts of the code were moved to the HostScreen class.
  The HostScreen hostScreen; object is created statically in the hardware.cpp.
  (Most of the methods are inline and thus put into hostscreen.h file)

- several methods were renamed again (one example for all: getVideoMode() ->
  getScreenBpp()).

- some copyright (and CVS) comments added. Please - authors - put the CVS
  comments to the beginning and to the bottom of each source file conforming
  the template provided in the projects root directory (template.cpp).


2001/06/18 - STanda
- videl renderScreen() fix (lock & unlock screen added - again)

- the Shift+Pause combination is now used to exit the emulator immediately
  (this was joy's code change, but forgotten to tell us ;))... anyway thanks
  for really good working videl now. I seem not to have any problems with
  color palette here :).


2001/06/17 - joy
- System Timer (200 Hz Timer C) should be precise even under heavy load now.
  The MFP stuff needs to be rewritten from scratch. My C++ OOP knowledge sucks.

- implemented virtual destructor in ICio class. Thanks to that the desctructor
  of RTC is called and saves the settings to disk (file "cmos" - actual folder,
  needs to be fixed - "$HOME/.aranym/cmos" looks like a good idea).

- NVRAM is read from disk/stored to disk automatically. You can use your
  favorite NVRAM editor now.

- system date/time is restored from RTC (host local time is used, not GMT).
  Year needs to be fixed yet.

- a lot of work on mouse cursor, still not as good as STonX's one.
  Mouse is grabbed automatically when you move the cursor over Aranym window.
  To release it hold Control and right click. Then you can leave the aranym
  window - when you move the mouse pointer back over the window it's grabbed
  again.

- it seems that Videl uses different color register sets for different color
  depths (as 4 and 16 color depth's colors are incorrect). Scary. Probably
  some compatibility nightmare.

- fixed too early SDL_Video initialization. Do not init stuff in constructors
  as they are invoked before main(). Fix the ExtFs stuff (install "A" ???)


2001/06/15 - joy
- VIDEL finished. Hardware color palette registers are used properly now.


2001/06/13 - STanda
- some VIDEL public routins adjusted to provide fVDI driver needed methods.
  (lockScreen(), unlockScreen(), getHostVideoramAddress())

- updateScreen() semantics was updated to SDL_UpdateRect... (only). The
  original method functionality was captured in new renderScreen() method


2001/06/12 - joy
- VIDEL rewritten using the new BASE_IO class. Got proper getVideoMode()
  and getWidth/Height (all stolen from Linux-m68k source code).
  Extended resolutions (using BlowUP030) work now perfectly (e.g. 1024x768).

- new DSP module is based on the new BASE_IO - you see, it's easy to write
  HW emulation stuff now.


2001/06/08 - joy
- highly unfinished, very preliminary, often crashing support for extended
  VIDEL resolutions. I know how to fix it, just give me some time.


2001/06/06 - joy
- '--grab_mouse' command line switch for X-Windows

- floppy can be inserted and removed in run-time. Press F11 to insert
  a floppy read-only. Hold Shift and press F11 to insert the floppy read-write.
  Make sure you have rw permissions on /dev/fd0 for this.
  Press F12 to remove a floppy. It seems to be unnecessary to manually remove
  the floppy each time since the writting should be synchronized (O_SYNC).

  This is not a final stage yet - if we stopped supporting disk images we
  could make the floppy inserting/removing fully automatic.


2001/06/05 - STanda
- extfs: the drives are assignable from commandline option -disk (-d)
  The AUTO/CONFIG.SYS must still contain the conresponding drive-letter
  assignment with the -d options on the commandline.

- the paramenters.cpp contains the drive assignment which is read by
  ExtFs.init() method (called from main_unix.cpp)

- the short -debug option was redesigned to -D


2001/05/29 - joy - version increased to 0.0.3
- major speed up (22 -> 27 thousand dhrystones) thanks to moving setjmp()
  out of main CPU loop

- excep_no var removed from memory.cpp and newcpu.cpp

- fixed VBL invocation (main_unix.cpp)


2001/05/29 - joy - version increased to 0.0.2
- uae_cpu/memory.h - you can enable or disable CHECK_MEMORY_END.
  When enabled, direct_truecolor bombs out in early stage of TOS boot (because
  TOS cannot write to videoram).
  When disabled, FastRAM works (just run FASTRAM.PRG from the desktop and
  you'll get 32 MB of additional fast ram).

- 'boot_color_depth' switch works now thanks to late initializing of RTC module
  in HWInit().

- 'monitor' switch allows you to choose between VGA and TV connected on Videl
  output.

- 'direct_truecolor' switch allows you to patch TOS so that Videl VideoRAM
  is set directly to host's VideoRAM. Thus VIDEL writes directly to host's
  VGA card video memory (if framebuffer is used as the SDL_VIDEODRIVER).


2001/05/28 - joy
- implemented proper Bus Error (hardware.cpp and others). This helps
  in a number of places, namely in FPU detection routines.

- fixed floppy emulation (fdc.cpp). STonX code contained wrong HW register
  addresses. I found it when I enabled FastRAM - the FDC was crashing
  the virtual machine.

- added memory bounds checking (memory.h). Ill behaving programs (and bad FDC
  emulation, as mentioned above :) won't crash the virtual machine anymore!

- new memory allocation (main_unix.cpp), enables 32 MB of FastRAM.
